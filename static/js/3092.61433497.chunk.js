"use strict";(self.webpackChunkData_in_Design=self.webpackChunkData_in_Design||[]).push([[3092],{99846:(t,e,n)=>{n.d(e,{$Q:()=>x,FI:()=>g,KL:()=>u,Lu:()=>d,MD:()=>h,Rn:()=>w,Ud:()=>S,Wu:()=>_,Y2:()=>m,gf:()=>V});var r=n(45802),o=n(30726),i=n(4081),a=n(52494);const l=new Map;l.set("meter-per-second",1),l.set("kilometer-per-hour",.277778),l.set("knots",.514444),l.set("feet-per-second",.3048),l.set("mile-per-hour",.44704);const s=180/Math.PI,c=5,h=new r.J({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function u(t,e){return l.get(t)/l.get(e)||1}function f(t){return(450-t)%360}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic";const[n,r]=t,o=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n)*s;return i=(360+i)%360,"geographic"===e&&(i=f(i)),[o,i]}function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",n=t[1];"geographic"===e&&(n=f(n)),n%=360;const r=t[0];return[r*Math.cos(n/s),r*Math.sin(n/s)]}function m(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"geographic";if(!(0,a.AB)(t)||(0,o.$I)(n))return t;const i="vector-magdir"===e?t.clone():(0,o.oA)(g(t,e)),l=i.pixels[1];for(let o=0;o<l.length;o++)l[o]="geographic"===r?(l[o]+n[o]+270)%360:(l[o]+360-n[o])%360;return"vector-magdir"===e?i:g(i,"vector-magdir")}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!(0,a.AB)(t))return t;const{pixels:o,width:l,height:s}=t,c=l*s,h=o[0],u=o[1],f=t.pixelType.startsWith("f")?t.pixelType:"f32",m=i.A.createEmptyBand(f,c),g=i.A.createEmptyBand(f,c);let w=0;for(let i=0;i<s;i++)for(let t=0;t<l;t++)"vector-uv"===e?([m[w],g[w]]=d([h[w],u[w]],n),m[w]*=r):([m[w],g[w]]=p([h[w],u[w]],n),m[w]*=r,g[w]*=r),w++;const x=new i.A({pixelType:f,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[m,g]});return x.updateStatistics(),x}function w(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===n||!(0,a.AB)(t))return t;const r=t.clone(),{pixels:o,width:i,height:l}=r,s=o[0],c=o[1];let h=0;for(let a=0;a<l;a++)for(let t=0;t<i;t++)"vector-uv"===e?(s[h]*=n,c[h]*=n):s[h]*=n,h++;return r.updateStatistics(),r}function x(t,e,n,r,i){if((0,o.$I)(i)||!i.spatialReference.equals(t.spatialReference))return{extent:t,width:Math.round(e/r),height:Math.round(n/r),resolution:t.width/e};const a=i.xmin,l=i.ymax,s=(t.xmax-t.xmin)/e*r,c=(t.ymax-t.ymin)/n*r,h=(s+c)/2;return t.xmin=a+Math.floor((t.xmin-a)/s)*s,t.xmax=a+Math.ceil((t.xmax-a)/s)*s,t.ymin=l+Math.floor((t.ymin-l)/c)*c,t.ymax=l+Math.ceil((t.ymax-l)/c)*c,{extent:t,width:Math.round(t.width/s),height:Math.round(t.height/c),resolution:h}}const M=y(0,0,0);function y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r&&(n=(2*Math.PI-n)%(2*Math.PI));const o=r?-1:1,i=13*o,a=-7*o,l=-2*o,s=-16*o,c=21.75,[h,u]=v(0,e+i,n,c),[f,d]=v(t-5.5,e+a,n,c),[p,m]=v(t+5.5,e+a,n,c),[g,w]=v(t-1.5,e+l,n,c),[x,M]=v(t+1.5,e+l,n,c),[y,A]=v(t-1.5,e+s,n,c),[k,I]=v(t+1.5,e+s,n,c);return[h,u,f,d,g,w,x,M,p,m,y,A,k,I]}function A(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n&&(e=(2*Math.PI-e)%(2*Math.PI));const r=n?-1:1,o=5*r,i=20*r,a=25*r,l=45,s=2*r,h=n?1:-1,u=5*h;let[f,d]=[0+u,0-i],[p,m]=[f+2*h,d],[g,w]=[p-0*h,m+s],[x,M]=[0-u,0-a],[y,A]=[x+0*h,M-s],k=Math.ceil(t/c),I=Math.floor(k/10);k-=8*I;const b=[],D=[];for(let c=0;c<k/2;c++,I--){I<=0&&k%2==1&&c===(k-1)/2&&(x=0,y=x+0*h,M=(M+d)/2,A=M-s);const[t,n]=v(x,M,e,l);if(I>0){const[r,o]=v(p,M,e,l),[i,a]=v(f,d,e,l);b.push(r),b.push(o),b.push(t),b.push(n),b.push(i),b.push(a)}else{const[r,o]=v(p,m,e,l),[i,a]=v(g,w,e,l),[s,c]=v(y,A,e,l);D.push(t),D.push(n),D.push(s),D.push(c),D.push(i),D.push(a),D.push(r),D.push(o)}M+=o,d+=o,m+=o,w+=o,A+=o}const[P,F]=v(0+u,0+i,e,l),S=7*h,[V,_]=v(0+S,0+i,e,l),[U,L]=v(0+u,0-a,e,l),[q,T]=v(0+S,0-a,e,l);return{pennants:b,barbs:D,shaft:[P,F,V,_,U,L,q,T]}}function v(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=Math.sqrt(t*t+e*e)/r,i=(2*Math.PI+Math.atan2(e,t))%(2*Math.PI);return[o,(2*Math.PI+i-n)%(2*Math.PI)]}const k=[0,1,3,6,10,16,21,27,33,40,47,55,63],I=[0,.5,1,1.5,2],b=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function D(t,e,n,r){const o=u(r||"knots",n);let i;for(i=1;i<e.length;i++)if(i===e.length-1){if(t<e[i]*o)break}else if(t<=e[i]*o)break;return Math.min(i-1,e.length-2)}function P(t,e,n,r,o){let i=0;switch(e){case"beaufort_kn":i=D(t,k,"knots",n);break;case"beaufort_km":i=D(t,k,"kilometer-per-hour",n);break;case"beaufort_ft":i=D(t,k,"feet-per-second",n);break;case"beaufort_m":i=D(t,k,"meter-per-second",n);break;case"classified_arrow":i=D(t,null!==o&&void 0!==o?o:[],r,n);break;case"ocean_current_m":i=D(t,I,"meter-per-second",n);break;case"ocean_current_kn":i=D(t,b,"knots",n)}return i}const F=[];function S(t,e){let n=0,r=0;const{width:o,height:i,mask:a}=t,l=t.pixels[0],s=[],f=[],d=u(h.fromJSON(e.inputUnit),"knots"),p="wind_speed"===e.style?c:Number.MAX_VALUE;for(let c=0;c<i;c++)for(let t=0;t<o;t++){const e=l[c*o+t]*d;if((!a||a[c*o+t])&&e<p){for(let r=0;r<4;r++)s[n++]=(t+.5)/o,s[n++]=(c+.5)/i,s[n++]=r<2?-.5:.5,s[n++]=r%2==0?-.5:.5,s[n++]=0,s[n++]=e;const a=4*(n/24-1);f[r++]=a,f[r++]=a+1,f[r++]=a+2,f[r++]=a+1,f[r++]=a+2,f[r++]=a+3}}return{vertexData:new Float32Array(s),indexData:new Uint32Array(f)}}function V(t,e){return"simple_scalar"===e.style?S(t,e):"wind_speed"===e.style?function(t,e){if(0===F.length)for(let c=0;c<30;c++)F.push(A(5*c,0,!e.invertDirection));const n=u(h.fromJSON(e.inputUnit),"knots"),{width:r,height:o,mask:i}=t,a=t.pixels[0],l=t.pixels[1],s=[],f=[];let d=0,p=0;for(let h=0;h<o;h++)for(let t=0;t<r;t++){const e=h*r+t,u=a[e]*n;if((!i||i[h*r+t])&&u>=c){const n=(l[e]+360)%360/180*Math.PI,{pennants:i,barbs:a,shaft:c}=F[Math.min(Math.floor(u/5),29)];if(i.length+a.length===0)continue;let m=s.length/6;const g=(t+.5)/r,w=(h+.5)/o;for(let t=0;t<i.length;t+=2)s[d++]=g,s[d++]=w,s[d++]=i[t],s[d++]=i[t+1]+n,s[d++]=0,s[d++]=u;for(let t=0;t<a.length;t+=2)s[d++]=g,s[d++]=w,s[d++]=a[t],s[d++]=a[t+1]+n,s[d++]=0,s[d++]=u;for(let t=0;t<c.length;t+=2)s[d++]=g,s[d++]=w,s[d++]=c[t],s[d++]=c[t+1]+n,s[d++]=0,s[d++]=u;for(let t=0;t<i.length/6;t++)f[p++]=m,f[p++]=m+1,f[p++]=m+2,m+=3;for(let t=0;t<a.length/8;t++)f[p++]=m,f[p++]=m+1,f[p++]=m+2,f[p++]=m+1,f[p++]=m+2,f[p++]=m+3,m+=4;f[p++]=m+0,f[p++]=m+1,f[p++]=m+2,f[p++]=m+1,f[p++]=m+3,f[p++]=m+2,m+=4}}return{vertexData:new Float32Array(s),indexData:new Uint32Array(f)}}(t,e):function(t,e){const{style:n,inputUnit:r,outputUnit:i,breakValues:a}=e,l=h.fromJSON(r),s=h.fromJSON(i);let c=0,u=0;const{width:f,height:d,mask:p}=t,m=t.pixels[0],g=t.pixels[1],w=(0,o.Ru)(p)?p.filter((t=>t>0)).length:f*d,x=new Float32Array(42*w),A=new Uint32Array(15*w),v=e.invertDirection?y(0,0,0,!1):M;for(let o=0;o<d;o++)for(let t=0;t<f;t++){const e=o*f+t;if(!p||p[o*f+t]){const r=(g[e]+360)%360/180*Math.PI,i=P(m[e],n,l,s,a);for(let n=0;n<v.length;n+=2)x[c++]=(t+.5)/f,x[c++]=(o+.5)/d,x[c++]=v[n],x[c++]=v[n+1]+r,x[c++]=i,x[c++]=m[e];const h=7*(c/42-1);A[u++]=h,A[u++]=h+1,A[u++]=h+2,A[u++]=h+0,A[u++]=h+4,A[u++]=h+3,A[u++]=h+0,A[u++]=h+2,A[u++]=h+3,A[u++]=h+2,A[u++]=h+5,A[u++]=h+3,A[u++]=h+5,A[u++]=h+6,A[u++]=h+3}}return{vertexData:x,indexData:A}}(t,e)}function _(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const{width:a,height:l,mask:s}=t,[c,h]=t.pixels,[u,f]=r,m=Math.round((a-u)/n),g=Math.round((l-f)/n),w=m*g,x=new Float32Array(w),M=new Float32Array(w),y=new Uint8Array(w),A="vector-uv"===e;for(let i=0;i<g;i++)for(let t=0;t<m;t++){let e=0;const r=i*m+t,g=Math.max(0,i*n+f),w=Math.max(0,t*n+u),v=Math.min(l,g+n),k=Math.min(a,w+n);for(let t=g;t<v;t++)for(let n=w;n<k;n++){const o=t*a+n;if(!s||s[o]){e++;const t=A?[c[o],h[o]]:[c[o],(360+h[o])%360],[n,i]=A?t:p(t);x[r]+=n,M[r]+=i}}if(e>=(v-g)*(k-w)*(1-o)){y[r]=1;const[t,n]=d([x[r]/e,M[r]/e]);x[r]=t,M[r]=n}else y[r]=0,x[r]=0,M[r]=0}const v=new i.A({width:m,height:g,pixels:[x,M],mask:y});return v.updateStatistics(),v}},46533:(t,e,n)=>{n.d(e,{CW:()=>d,pH:()=>x});n(35238);var r=n(81806),o=n(76460),i=n(15941),a=n(30726),l=n(50346),s=n(47249),c=n(80963),h=n(76797);const u=o.A.getLogger("esri.views.2d.engine.flow.dataUtils"),f=10;async function d(t,e,n,o){const i=performance.now(),a=p(e,n),c=performance.now(),h=g(e,a,n.width,n.height),d=performance.now(),m=function(t,e){const n=new s.A,r=t.reduce(((t,e)=>t+e.length),0),o=new Float32Array(4*r),i=new Array(t.length);let a=0,l=0;for(const s of t){const t=a;for(const e of s)o[4*a+0]=e.x,o[4*a+1]=e.y,o[4*a+2]=e.t,o[4*a+3]=e.speed,a++;i[l++]={startVertex:t,numberOfVertices:s.length,totalTime:s[s.length-1].t,timeSeed:e?n.getFloat():0}}return{lineVertices:o,lineDescriptors:i}}(h,!0),w=performance.now(),x="Streamlines"===t?function(t,e){const n=9,{lineVertices:r,lineDescriptors:o}=t;let i=0,a=0;for(const d of o)i+=2*d.numberOfVertices,a+=6*(d.numberOfVertices-1);const l=new Float32Array(i*n),s=new Uint32Array(a);let c=0,h=0;function u(){s[h++]=c-2,s[h++]=c,s[h++]=c-1,s[h++]=c,s[h++]=c+1,s[h++]=c-1}function f(t,e,r,o,i,a,s,h){const u=c*n;let f=0;l[u+f++]=t,l[u+f++]=e,l[u+f++]=1,l[u+f++]=r,l[u+f++]=a,l[u+f++]=s,l[u+f++]=o/2,l[u+f++]=i/2,l[u+f++]=h,c++,l[u+f++]=t,l[u+f++]=e,l[u+f++]=-1,l[u+f++]=r,l[u+f++]=a,l[u+f++]=s,l[u+f++]=-o/2,l[u+f++]=-i/2,l[u+f++]=h,c++}for(const d of o){const{totalTime:t,timeSeed:n}=d;let o=null,i=null,a=null,l=null,s=null,c=null;for(let h=0;h<d.numberOfVertices;h++){const p=r[4*(d.startVertex+h)+0],m=r[4*(d.startVertex+h)+1],g=r[4*(d.startVertex+h)+2],w=r[4*(d.startVertex+h)+3];let x=null,M=null,y=null,A=null;if(h>0){x=p-o,M=m-i;const r=Math.sqrt(x*x+M*M);if(x/=r,M/=r,h>1){let t=x+s,n=M+c;const r=Math.sqrt(t*t+n*n);t/=r,n/=r;const o=Math.min(1/(t*x+n*M),e);t*=o,n*=o,y=-n,A=t}else y=-M,A=x;null!==y&&null!==A&&(f(o,i,a,y,A,t,n,w),u())}o=p,i=m,a=g,s=x,c=M,l=w}f(o,i,a,-c,s,t,n,l)}return{vertexData:l,indexData:s}}(m,f):function(t){const e=16,n=1,r=2,{lineVertices:o,lineDescriptors:i}=t;let a=0,l=0;for(const _ of i){const t=_.numberOfVertices-1;a+=4*t*2,l+=6*t*2}const s=new Float32Array(a*e),c=new Uint32Array(l);let h,u,f,d,p,m,g,w,x,M,y,A,v,k,I=0,b=0;function D(){c[b++]=I-8,c[b++]=I-7,c[b++]=I-6,c[b++]=I-7,c[b++]=I-5,c[b++]=I-6,c[b++]=I-4,c[b++]=I-3,c[b++]=I-2,c[b++]=I-3,c[b++]=I-1,c[b++]=I-2}function P(t,o,i,a,l,c,h,u,f,d,p,m,g,w){const x=I*e;let M=0;for(const e of[n,r])for(const n of[1,2,3,4])s[x+M++]=t,s[x+M++]=o,s[x+M++]=i,s[x+M++]=a,s[x+M++]=h,s[x+M++]=u,s[x+M++]=f,s[x+M++]=d,s[x+M++]=e,s[x+M++]=n,s[x+M++]=g,s[x+M++]=w,s[x+M++]=l/2,s[x+M++]=c/2,s[x+M++]=p/2,s[x+M++]=m/2,I++}function F(t,e){let n=x+y,r=M+A;const o=Math.sqrt(n*n+r*r);n/=o,r/=o;const i=x*n+M*r;n/=i,r/=i;let a=y+v,l=A+k;const s=Math.sqrt(a*a+l*l);a/=s,l/=s;const c=y*a+A*l;a/=c,l/=c,P(h,u,f,d,-r,n,p,m,g,w,-l,a,t,e),D()}function S(t,e,n,r,o,i){if(x=y,M=A,y=v,A=k,null==x&&null==M&&(x=y,M=A),null!=p&&null!=m){v=t-p,k=e-m;const n=Math.sqrt(v*v+k*k);v/=n,k/=n}null!=x&&null!=M&&F(o,i),h=p,u=m,f=g,d=w,p=t,m=e,g=n,w=r}function V(t,e){x=y,M=A,y=v,A=k,null==x&&null==M&&(x=y,M=A),null!=x&&null!=M&&F(t,e)}for(const _ of i){h=null,u=null,f=null,d=null,p=null,m=null,g=null,w=null,x=null,M=null,y=null,A=null,v=null,k=null;const{totalTime:t,timeSeed:e}=_;for(let n=0;n<_.numberOfVertices;n++)S(o[4*(_.startVertex+n)+0],o[4*(_.startVertex+n)+1],o[4*(_.startVertex+n)+2],o[4*(_.startVertex+n)+3],t,e);V(t,e)}return{vertexData:s,indexData:c}}(m),M=performance.now();return(0,r.A)("esri-2d-profiler")&&(u.info("I.1","_createFlowFieldFromData (ms)",Math.round(c-i)),u.info("I.2","_getStreamlines (ms)",Math.round(d-c)),u.info("I.3","createAnimatedLinesData (ms)",Math.round(w-d)),u.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(M-w)),u.info("I.5","createFlowMesh (ms)",Math.round(M-i)),u.info("I.6","Mesh size (bytes)",x.vertexData.buffer.byteLength+x.indexData.buffer.byteLength)),await Promise.resolve(),(0,l.Te)(o),x}function p(t,e){const n=function(t,e,n,r){if(0===r)return t;const o=Math.round(3*r),i=new Array(2*o+1);let a=0;for(let c=-o;c<=o;c++){const t=Math.exp(-c*c/(r*r));i[c+o]=t,a+=t}for(let c=-o;c<=o;c++)i[c+o]/=a;const l=new Float32Array(t.length);for(let c=0;c<n;c++)for(let n=0;n<e;n++){let r=0,a=0;for(let l=-o;l<=o;l++){if(n+l<0||n+l>=e)continue;const s=i[l+o];r+=s*t[2*(c*e+(n+l))+0],a+=s*t[2*(c*e+(n+l))+1]}l[2*(c*e+n)+0]=r,l[2*(c*e+n)+1]=a}const s=new Float32Array(t.length);for(let c=0;c<e;c++)for(let t=0;t<n;t++){let r=0,a=0;for(let s=-o;s<=o;s++){if(t+s<0||t+s>=n)continue;const h=i[s+o];r+=h*l[2*((t+s)*e+c)+0],a+=h*l[2*((t+s)*e+c)+1]}s[2*(t*e+c)+0]=r,s[2*(t*e+c)+1]=a}return s}(e.data,e.width,e.height,t.smoothing);return t.interpolate?(t,r)=>{const o=Math.floor(t),i=Math.floor(r);if(o<0||o>=e.width)return[0,0];if(i<0||i>=e.height)return[0,0];const a=t-o,l=r-i,s=o,c=i,h=o<e.width-1?o+1:o,u=i<e.height-1?i+1:i,f=n[2*(c*e.width+s)],d=n[2*(c*e.width+h)],p=n[2*(u*e.width+s)],m=n[2*(u*e.width+h)],g=n[2*(c*e.width+s)+1],w=n[2*(c*e.width+h)+1];return[(f*(1-l)+p*l)*(1-a)+(d*(1-l)+m*l)*a,(g*(1-l)+n[2*(u*e.width+s)+1]*l)*(1-a)+(w*(1-l)+n[2*(u*e.width+h)+1]*l)*a]}:(t,r)=>{const o=Math.round(t),i=Math.round(r);return o<0||o>=e.width||i<0||i>=e.height?[0,0]:[n[2*(i*e.width+o)+0],n[2*(i*e.width+o)+1]]}}function m(t,e,n,r,o,i,a,l,s){const c=[];let h=n,u=r,f=0,[d,p]=e(h,u);d*=t.velocityScale,p*=t.velocityScale;const m=Math.sqrt(d*d+p*p);let g,w;c.push({x:h,y:u,t:f,speed:m});for(let x=0;x<t.verticesPerLine;x++){let[n,r]=e(h,u);n*=t.velocityScale,r*=t.velocityScale;const d=Math.sqrt(n*n+r*r);if(d<t.minSpeedThreshold)return c;const p=n/d,m=r/d;if(h+=p*t.segmentLength,u+=m*t.segmentLength,f+=t.segmentLength/d,Math.acos(p*g+m*w)>t.maxTurnAngle)return c;if(t.collisions){const t=Math.round(h*s),e=Math.round(u*s);if(t<0||t>a-1||e<0||e>l-1)return c;const n=i[e*a+t];if(-1!==n&&n!==o)return c;i[e*a+t]=o}c.push({x:h,y:u,t:f,speed:d}),g=p,w=m}return c}function g(t,e,n,r){const o=[],i=new s.A,a=1/Math.max(t.lineCollisionWidth,1),l=Math.round(n*a),c=Math.round(r*a),h=new Int32Array(l*c);for(let s=0;s<h.length;s++)h[s]=-1;const u=[];for(let s=0;s<r;s+=t.lineSpacing)for(let e=0;e<n;e+=t.lineSpacing)u.push({x:e,y:s,sort:i.getFloat()});u.sort(((t,e)=>t.sort-e.sort));for(const{x:s,y:f}of u)if(i.getFloat()<t.density){const n=m(t,e,s,f,o.length,h,l,c,a);if(n.length<2)continue;o.push(n)}return o}function w(t,e){const n=e.pixels,{width:r,height:o}=e,a=new Float32Array(r*o*2),l=e.mask||new Uint8Array(r*o*2);if(e.mask||l.fill(255),"vector-uv"===t)for(let i=0;i<r*o;i++)a[2*i+0]=n[0][i],a[2*i+1]=-n[1][i];else if("vector-magdir"===t)for(let s=0;s<r*o;s++){const t=n[0][s],e=(0,i.kU)(n[1][s]),r=Math.cos(e-Math.PI/2),o=Math.sin(e-Math.PI/2);a[2*s+0]=r*t,a[2*s+1]=o*t}return{data:a,mask:l,width:r,height:o}}async function x(t,e,n,o,i,a){const l=performance.now(),s=(0,c.Vp)(e.spatialReference);if(!s){const s=await M(t,e,n,o,i,a);return(0,r.A)("esri-2d-profiler")&&u.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-l)),(0,r.A)("esri-2d-profiler")&&u.info("I.9","Number of parts",1),s}const[f,d]=s.valid,p=d-f,m=Math.ceil(e.width/p),g=e.width/m,w=Math.round(n/m);let x=e.xmin;const y=[],A=performance.now();for(let r=0;r<m;r++){const n=new h.A({xmin:x,xmax:x+g,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});y.push(M(t,n,w,o,i,a)),x+=g}const v=await Promise.all(y);(0,r.A)("esri-2d-profiler")&&u.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-A)),(0,r.A)("esri-2d-profiler")&&u.info("I.9","Number of parts",v.length);const k={data:new Float32Array(n*o*2),mask:new Uint8Array(n*o),width:n,height:o};let I=0;for(const r of v){for(let t=0;t<r.height;t++)for(let e=0;e<r.width;e++)I+e>=n||(k.data[2*(t*n+I+e)+0]=r.data[2*(t*r.width+e)+0],k.data[2*(t*n+I+e)+1]=r.data[2*(t*r.width+e)+1],k.mask[t*n+I+e]=r.mask[t*r.width+e]);I+=r.width}return(0,r.A)("esri-2d-profiler")&&u.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-l)),k}async function M(t,e,n,r,o,i){const l={requestProjectedLocalDirections:!0,signal:i};if((0,a.Ru)(o)&&(l.timeExtent=o),"imagery"===t.type){await t.load({signal:i});const o=t.rasterInfo.dataType,s=await t.fetchImage(e,n,r,l);return!s||(0,a.$I)(s.pixelData)||(0,a.$I)(s.pixelData.pixelBlock)?{data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r}:w(o,s.pixelData.pixelBlock)}await t.load({signal:i});const s=t.rasterInfo.dataType,c=await t.fetchPixels(e,n,r,l);return!c||(0,a.$I)(c.pixelBlock)?{data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r}:w(s,c.pixelBlock)}}}]);
//# sourceMappingURL=3092.61433497.chunk.js.map