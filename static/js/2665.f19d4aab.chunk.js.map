{"version":3,"file":"static/js/2665.f19d4aab.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isSome as s,unwrap as a}from\"../../../core/maybe.js\";import{throwIfAborted as i,isAbortError as o}from\"../../../core/promiseUtils.js\";import{equals as n,WGS84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as p,convertToGeometry as h}from\"../featureConversionUtils.js\";import y from\"../data/FeatureStore.js\";import{project as c,checkProjectionSupport as m}from\"../data/projectionSupport.js\";import{QueryEngine as l}from\"../data/QueryEngine.js\";import{validateGeoJSON as g,createOptimizedFeatures as _}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getFeature as d}from\"../../ogc/wfsUtils.js\";import w from\"../../support/FieldsIndex.js\";class E{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await d(this._getFeatureUrl??\"\",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await g(r),i(e);const a=_(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!n(this._queryEngine.spatialReference,u))for(const i of a)s(i.geometry)&&(i.geometry=p(c(h(i.geometry,this._queryEngine.geometryType,!1,!1),u,this._queryEngine.spatialReference)));let o=1;for(const s of a){const e={};f(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=o++)}return a}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:s,spatialReference:o,fields:n,geometryType:u,featureType:p,objectIdField:h,customParameters:c}=e;this._featureType=p,this._customParameters=c,this._getFeatureUrl=r,this._getFeatureOutputFormat=s,this._fieldsIndex=new w(n),await this._checkProjection(o),i(t),this._queryEngine=new l({fields:n,geometryType:u,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:o,timeInfo:null,featureStore:new y({geometryType:u,hasM:!1,hasZ:!1})});const m=await this._snapshotFeatures(a(t.signal));return this._queryEngine.featureStore.addMany(m),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new t(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=e(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),o(e)||r.getLogger(\"esri.layers.WFSLayer\").error(new t(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:e}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await m(u,e)}catch{throw new t(\"unsupported-projection\",\"Projection not supported\",{spatialReference:e})}}}export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s,sanitizeNullFieldValue as o}from\"../../../support/fieldUtils.js\";class l{constructor(){this.code=null,this.description=null}}class u{constructor(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new u(e)}class c{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function f(e){return new c(e)}const d=new Set;function m(e,t,r,s=!1,o){d.clear();for(const l in r){const u=e.get(l);if(!u)continue;const c=r[l],f=p(u,c);if(f!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:u,originalValue:c,sanitizedValue:f}}),d.add(u.name),u&&(s||u.editable)){const e=n(u,f);if(e)return a(i(e,u,f));t[u.name]=f}}for(const n of e?.requiredFields??[])if(!d.has(n.name))return a(`missing required field \"${n.name}\"`);return null}function p(e,t){let n=t;return\"string\"==typeof t&&r(e)?n=parseFloat(t):null!=t&&s(e)&&\"string\"!=typeof t&&(n=String(t)),o(n)}let h;function g(n,i){if(!n||!t(i))return n;if(\"rings\"in n||\"paths\"in n){if(e(h))throw new TypeError(\"geometry engine not loaded\");return h.simplify(i,n)}return n}async function y(){return e(h)&&(h=await import(\"../../../../geometry/geometryEngineJSON.js\")),h}async function w(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await y()}export{a as createFeatureEditErrorResult,f as createFeatureEditSuccessResult,w as loadGeometryEngineForSimplify,m as mixAttributes,g as simplify};\n"],"names":["E","constructor","this","_queryEngine","_customParameters","_snapshotFeatures","async","_this$_getFeatureUrl","objectIdField","t","r","d","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","e","name","signal","g","i","a","_","geometryType","hasZ","n","spatialReference","u","s","geometry","p","c","h","o","f","_fieldsIndex","attributes","objectId","destroy","_this$_queryEngine","load","getFeatureUrl","getFeatureOutputFormat","fields","featureType","w","_checkProjection","l","hasM","timeInfo","featureStore","y","m","addMany","extent","fullExtent","applyEdits","queryFeatures","arguments","length","undefined","_waitSnapshotComplete","executeQuery","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","refresh","_this$_snapshotTask","_snapshotTask","abort","promise","then","clear","getLogger","error","finished","_unused","_unused2","code","description","globalId","success","uniqueId","Set","get","push","message","details","field","originalValue","sanitizedValue","add","editable","_e$requiredFields","requiredFields","has","concat","parseFloat","String","TypeError","simplify"],"sourceRoot":""}