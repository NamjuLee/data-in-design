"use strict";(self.webpackChunkdata_in_design=self.webpackChunkdata_in_design||[]).push([[6799],{33635:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(82284);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function i(){i=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,i){var s=RegExp(e,r);return t.set(s,i||t.get(e)),o(s,n.prototype)}function s(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=s(n,this);var r=n.indices;r&&(r.groups=s(r,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,r.A)(e[e.length-1])&&(e=[].slice.call(e)).push(s(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},i.apply(this,arguments)}},10907:(e,t,n)=>{n.d(t,{BM:()=>F,bd:()=>I,sO:()=>A,xD:()=>l});var r=n(50076),o=n(20176),i=n(1484),s=n(32808);const a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function l(e){return a[e]}function*c(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*u(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function p(e){for(const t of e)if(t.length>2)return!0;return!1}function d(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n],o=e[(n+1)%e.length];t+=r[0]*o[1]-o[0]*r[1]}return t<=0}function f(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function y(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,n){return h(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(const r of t.coordinates)h(e,r,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(const r of t.coordinates){g(e,r[0],n);for(let t=1;t<r.length;t++)m(e,r[t],n)}return e}(e,t,n);case"Point":return function(e,t,n){return w(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){const r=t.coordinates;g(e,r[0],n);for(let o=1;o<r.length;o++)m(e,r[o],n);return e}(e,t,n)}}function g(e,t,n){const r=f(t);!function(e){return!d(e)}(r)?h(e,r,n):b(e,r,n)}function m(e,t,n){const r=f(t);!function(e){return d(e)}(r)?h(e,r,n):b(e,r,n)}function h(e,t,n){for(const r of t)w(e,r,n);e.lengths.push(t.length)}function b(e,t,n){for(let r=t.length-1;r>=0;r--)w(e,t[r],n);e.lengths.push(t.length)}function w(e,t,n){const[r,o,i]=t;e.coords.push(r,o),n.hasZ&&e.coords.push(i||0)}function v(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function A(e){if(!e)throw new r.A("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new r.A("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,o=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!o.test(n))throw new r.A("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function F(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[],o=new Set,i=new Set;let a,d=!1,f=null,y=!1,{geometryType:g=null}=n,m=!1;for(const b of c(e)){const{geometry:e,properties:t,id:n}=b;if((!e||(g||(g=l(e.type)),l(e.type)===g))&&(d||(d=p(u(e))),y||(y=null!=n,y&&(a=typeof n,f=Object.keys(t).filter((e=>t[e]===n)))),y&&null!=n&&(f.length>1?f=f.filter((e=>t[e]===n)):1===f.length&&(f=t[f[0]]===n?f:[])),!m&&t)){let e=!0;for(const n in t){if(o.has(n))continue;const a=t[n];if(null==a){e=!1,i.add(n);continue}const l=v(a);"unknown"!==l?(i.delete(n),o.add(n),r.push({name:(0,s.rS)(n),alias:n,type:l})):i.add(n)}m=e}}const h=(0,s.rS)(1===(null===(t=f)||void 0===t?void 0:t.length)&&f[0]||null);if(h)for(const l of r)if(l.name===h&&(0,s.WA)(l)){l.type="esriFieldTypeOID";break}return{fields:r,geometryType:g,hasZ:d,objectIdFieldName:h,objectIdFieldType:a,unknownFields:Array.from(i)}}function I(e,t){return Array.from(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{geometryType:n,objectIdField:r}=t;for(const a of e){var s;const{geometry:e,properties:c,id:u}=a;if(e&&l(e.type)!==n)continue;const p=c||{};let d=null!==(s=p[r])&&void 0!==s?s:null;r&&null!=u&&!p[r]&&(p[r]=d=u);const f=new o.Om(e?y(new i.A,e,t):null,p,null,d);yield f}}()}(c(e),t))}},40296:(e,t,n)=>{n.d(t,{F0:()=>l,Vx:()=>p,e2:()=>d,f:()=>f});var r=n(8),o=n(81806),i=n(53084),s=n(8298),a=n(44460);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?a.Cb:"esriGeometryPolyline"===e?a.yM:a.WR}}}const c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function p(e,t){if((0,o.A)("esri-csp-restrictions"))return()=>(0,r.A)({[t]:null},e);try{let n="this.".concat(t," = null;");for(const t in e)n+="this".concat(c.test(t)?".".concat(t):'["'.concat(t,'"]')," = ").concat(JSON.stringify(e[t]),";");const r=new Function("\n      return class AttributesClass$".concat(u++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return()=>new r}catch(n){return()=>(0,r.A)({[t]:null},e)}}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,i.o8)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:s.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},26799:(e,t,n)=>{n.d(t,{GA:()=>S,GL:()=>A,I:()=>x,J0:()=>k,Ki:()=>j,Px:()=>I,QE:()=>v,bV:()=>F,bW:()=>T,vJ:()=>w});var r=n(33635),o=n(8),i=(n(35238),n(3825)),s=n(50076),a=n(76460),l=n(30726),c=n(80963),u=n(45417),p=n(98618),d=n(75146),f=n(10907),y=n(40296),g=n(1900),m=n(6127),h=n(13312);const b=a.A.getLogger("esri.layers.graphics.sources.ogcfeature"),w="http://www.opengis.net/def/crs/",v="".concat(w,"OGC/1.3/CRS84");async function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const{links:a}=e,c=R(a,"items","application/geo+json")||R(a,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,l.$I)(c))throw new s.A("ogc-feature-layer:missing-items-page","Missing items url");const{data:u}=await(0,i.default)(c.href,{signal:n.signal,query:(0,o.A)((0,o.A)({limit:r},n.customParameters),{},{token:n.apiKey}),headers:{accept:"application/geo+json"}});await(0,f.sO)(u);const p=(0,f.BM)(u,{geometryType:t.geometryType}),d=t.fields||p.fields||[],h=null!=t.hasZ?t.hasZ:p.hasZ,w=p.geometryType,v=t.objectIdField||p.objectIdFieldName||"OBJECTID";let A=t.timeInfo;const F=d.find((e=>{let{name:t}=e;return t===v}));if(F)F.editable=!1,F.nullable=!1;else{if(!p.objectIdFieldType)throw new s.A("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");d.unshift({name:v,alias:v,type:"number"===p.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(v!==p.objectIdFieldName){const e=d.find((e=>{let{name:t}=e;return t===p.objectIdFieldName}));e&&(e.type="esriFieldTypeInteger")}d===p.fields&&p.unknownFields.length>0&&b.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:p.unknownFields}});for(const o of d){if(null==o.name&&(o.name=o.alias),null==o.alias&&(o.alias=o.name),"esriFieldTypeOID"!==o.type&&"esriFieldTypeGlobalID"!==o.type&&(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable),!o.name)throw new s.A("ogc-feature-layer:invalid-field-name","field name is missing",{field:o});if(!m.m.jsonValues.includes(o.type))throw new s.A("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(o.name,'"'),{field:o})}if(A){const e=new g.A(d);if(A.startTimeField){const t=e.get(A.startTimeField);t?(A.startTimeField=t.name,t.type="esriFieldTypeDate"):A.startTimeField=null}if(A.endTimeField){const t=e.get(A.endTimeField);t?(A.endTimeField=t.name,t.type="esriFieldTypeDate"):A.endTimeField=null}if(A.trackIdField){const t=e.get(A.trackIdField);t?A.trackIdField=t.name:(A.trackIdField=null,b.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:A}}))}A.startTimeField||A.endTimeField||(b.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:A}}),A=null)}return{drawingInfo:w?(0,y.F0)(w):null,extent:M(e),geometryType:w,fields:d,hasZ:!!h,objectIdField:v,timeInfo:A}}async function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{links:n}=e,r=R(n,"data","application/json")||R(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,l.$I)(r))throw new s.A("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:a,customParameters:c,signal:u}=t,{data:p}=await(0,i.default)(r.href,{signal:u,headers:{accept:"application/json"},query:(0,o.A)((0,o.A)({},c),{},{token:a})});return p}async function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{links:n}=e,r=R(n,"conformance","application/json")||R(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,l.$I)(r))throw new s.A("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:a,customParameters:c,signal:u}=t,{data:p}=await(0,i.default)(r.href,{signal:u,headers:{accept:"application/json"},query:(0,o.A)((0,o.A)({},c),{},{token:a})});return p}async function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{apiKey:n,customParameters:r,signal:s}=t,{data:a}=await(0,i.default)(e,{signal:s,headers:{accept:"application/json"},query:(0,o.A)((0,o.A)({},r),{},{token:n})});return a}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="application/vnd.oai.openapi+json;version=3.0",r=R(e.links,"service-desc",n);if((0,l.$I)(r))return b.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:s,customParameters:a,signal:c}=t,{data:u}=await(0,i.default)(r.href,{signal:c,headers:{accept:n},query:(0,o.A)((0,o.A)({},a),{},{token:s})});return u}function k(e){var t;const n=null===(t=(0,r.A)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e))||void 0===t?void 0:t.groups;if(!n)return null;const{authority:o,code:i}=n;switch(o.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return h.A.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return h.A.WGS84.wkid;default:return null}case"esri":case"epsg":{const e=Number.parseInt(i,10);return Number.isNaN(e)?null:e}default:return null}}async function T(e,t,n){const r=await x(e,t,n);return(0,p.ZF)(r)}async function x(e,t,n){const{collection:r,layerDefinition:a,maxRecordCount:y,queryParameters:{apiKey:g,customParameters:m},spatialReference:b,supportedCrs:w}=e,{links:v}=r,A=R(v,"items","application/geo+json")||R(v,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,l.$I)(A))throw new s.A("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:F,num:I,start:j,timeExtent:S,where:k}=t;if(t.objectIds)throw new s.A("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const T=h.A.fromJSON(b),x=(0,l.zO)(t.outSpatialReference,T),O=x.isWGS84?null:P(x,w),M=G(F,w),C=function(e){if((0,l.$I)(e))return null;const{start:t,end:n}=e;return"".concat((0,l.Ru)(t)?t.toISOString():"..","/").concat((0,l.Ru)(n)?n.toISOString():"..")}(S),N=(q=k,(0,l.$I)(q)||!q||"1=1"===q?null:q),$=null!==I&&void 0!==I?I:null!=j&&void 0!==j?10:y,{data:W}=await(0,i.default)(A.href,(0,o.A)((0,o.A)({},n),{},{query:(0,o.A)((0,o.A)((0,o.A)({},m),M),{},{crs:O,datetime:C,query:N,limit:$,startindex:j,token:g}),headers:{accept:"application/geo+json"}}));var q;let D=!1;if(W.links){D=!!W.links.find((e=>"next"===e.rel))}!D&&Number.isInteger(W.numberMatched)&&Number.isInteger(W.numberReturned)&&(D=W.numberReturned<W.numberMatched);const{fields:Z,geometryType:E,hasZ:L,objectIdField:_}=a,J=(0,f.bd)(W,{geometryType:E,hasZ:L,objectIdField:_});if(!O&&x.isWebMercator)for(const o of J)if((0,l.Ru)(o.geometry)){const e=(0,p.zv)(o.geometry,E,L,!1);e.spatialReference=h.A.WGS84,o.geometry=(0,p.Ux)((0,u.Cv)(e,x))}for(const o of J)o.objectId=o.attributes[_];const B=O||!O&&x.isWebMercator?x.toJSON():c.w5,z=new d.A;return z.exceededTransferLimit=D,z.features=J,z.fields=Z,z.geometryType=E,z.hasZ=L,z.objectIdFieldName=_,z.spatialReference=B,z}function P(e,t){var n,r,o;const{isWebMercator:i,wkid:s}=e;if(!s)return null;const a=i?null!==(n=null!==(r=null!==(o=t[3857])&&void 0!==o?o:t[102100])&&void 0!==r?r:t[102113])&&void 0!==n?n:t[900913]:t[e.wkid];return a?"".concat(w).concat(a):null}function O(e){if((0,l.$I)(e))return"";const{xmin:t,ymin:n,xmax:r,ymax:o}=e;return"".concat(t,",").concat(n,",").concat(r,",").concat(o)}function G(e,t){if(!function(e){return(0,l.Ru)(e)&&"extent"===e.type}(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:O(e)};const r=P(n,t);return(0,l.Ru)(r)?{bbox:O(e),"bbox-crs":r}:n.isWebMercator?{bbox:O((0,u.Cv)(e,h.A.WGS84))}:null}function M(e){var t;const n=null===(t=e.extent)||void 0===t?void 0:t.spatial;if(!n)return null;const r=n.bbox[0],o=4===r.length,i=r[0],s=r[1],a=o?void 0:r[2];return{xmin:i,ymin:s,xmax:o?r[2]:r[3],ymax:o?r[3]:r[4],zmin:a,zmax:o?void 0:r[5],spatialReference:h.A.WGS84.toJSON()}}function R(e,t,n){return e.find((e=>e.rel===t&&e.type===n))||e.find((e=>e.rel===t&&!e.type))}}}]);
//# sourceMappingURL=6799.cfa832e1.chunk.js.map