{"version":3,"file":"static/js/4279.13d51440.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/kmlUtils.js","../node_modules/@arcgis/core/views/support/imageReprojection.js","../node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../config.js\";import{id as o}from\"../../kernel.js\";import t from\"../../PopupTemplate.js\";import r from\"../../request.js\";import{clone as s}from\"../../core/lang.js\";import{addQueryParameters as n}from\"../../core/urlUtils.js\";import i from\"../../geometry/SpatialReference.js\";import{create as f,NEGATIVE_INFINITY as a,expandWithAABB as l,equals as u}from\"../../geometry/support/aaBoundingBox.js\";import{getBoundsXYZ as p}from\"../../geometry/support/boundsUtils.js\";import{fromJSON as m}from\"../../renderers/support/jsonUtils.js\";import y from\"../../rest/support/FeatureSet.js\";const c={esriGeometryPoint:\"points\",esriGeometryPolyline:\"polylines\",esriGeometryPolygon:\"polygons\"};function d(e){const o=e.folders||[],t=o.slice(),r=new Map,n=new Map,i=new Map,f=new Map,a=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:f};(e.featureCollection&&e.featureCollection.layers||[]).forEach((e=>{const o=s(e);o.featureSet.features=[];const t=e.featureSet.geometryType;r.set(t,o);const a=e.layerDefinition.objectIdField;\"esriGeometryPoint\"===t?G(n,a,e.featureSet.features):\"esriGeometryPolyline\"===t?G(i,a,e.featureSet.features):\"esriGeometryPolygon\"===t&&G(f,a,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((e=>{a.set(e.id,e)})),o.forEach((o=>{o.networkLinkIds.forEach((r=>{const s=P(r,o.id,e.networkLinks);s&&t.push(s)}))})),t.forEach((e=>{if(e.featureInfos){e.points=s(r.get(\"esriGeometryPoint\")),e.polylines=s(r.get(\"esriGeometryPolyline\")),e.polygons=s(r.get(\"esriGeometryPolygon\")),e.mapImages=[];for(const o of e.featureInfos)switch(o.type){case\"esriGeometryPoint\":case\"esriGeometryPolyline\":case\"esriGeometryPolygon\":{const t=l[o.type].get(o.id);t&&e[c[o.type]].featureSet.features.push(t);break}case\"GroundOverlay\":{const t=a.get(o.id);t&&e.mapImages.push(t);break}}e.fullExtent=j([e])}}));const u=j(t);return{folders:o,sublayers:t,extent:u}}function g(t,s,i,f){const a=o&&o.findCredential(t);t=n(t,{token:a&&a.token});const l=e.kmlServiceUrl;return r(l,{query:{url:t,model:\"simple\",folders:\"\",refresh:0!==i||void 0,outSR:JSON.stringify(s)},responseType:\"json\",signal:f})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,f=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&f.includes(i.id)&&(i.visible=r.includes(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}function h(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}function P(e,o,t){const r=h(e,t);return r&&(r.parentFolderId=o,r.networkLink=r),r}async function b(e){const o=y.fromJSON(e.featureSet).features,r=e.layerDefinition,s=m(r.drawingInfo.renderer),n=t.fromJSON(e.popupInfo),i=[];for(const t of o){const e=await s.getSymbolAsync(t);t.symbol=e,t.popupTemplate=n,t.visible=!0,i.push(t)}return i}function j(e){const o=f(a),t=f(a);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)p(o,e.geometry),l(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)p(o,e.geometry),l(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)p(o,e.geometry),l(t,o);if(r.mapImages)for(const e of r.mapImages)p(o,e.extent),l(t,o)}return u(t,a)?null:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:i.WGS84}}export{j as computeExtent,g as fetchService,b as getGraphics,d as parseKML,S as sublayersFromJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{project as r}from\"../../geometry/projection.js\";import{projectResolution as i,getProjectionOffsetGrid as a}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as s,rasterize as n}from\"../2d/engine/Bitmap.js\";import o from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as m}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{PixelFormat as p,PixelType as h,TextureWrapMode as c,TextureSamplingMode as d,TargetType as x,DepthStencilTargetType as g,ColorAttachment as u}from\"../webgl/enums.js\";import{FramebufferObject as _}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as f}from\"../webgl/rasterUtils.js\";import{RenderingContext as l}from\"../webgl/RenderingContext.js\";import{Texture as w}from\"../webgl/Texture.js\";class b{constructor(t){if(t)this._ownsRctx=!1,this._rctx=t;else{if(b._instance)return b._instanceRefCount++,b._instance;b._instanceRefCount=1,b._instance=this,this._ownsRctx=!0;const t=document.createElement(\"canvas\").getContext(\"webgl\");t.getExtension(\"OES_texture_float\"),this._rctx=new l(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=m(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new o(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:l,y:b}=i(m,s,t.extent);let D=(l+b)/2;const T=Math.round((o.xmax-o.xmin)/D),j=Math.round((o.ymax-o.ymin)/D);D=(o.width/T+o.height/j)/2;const E=new e({x:D,y:D,spatialReference:o.spatialReference}),R=a({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:E,hasWrapAround:!0,spacing:[16,16]}),C=f(this._rctx,R),y=new w(this._rctx,{width:T,height:j,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:d.LINEAR,hasMipmap:!1}),M=new _(this._rctx,{colorTarget:x.TEXTURE,depthStencilTarget:g.NONE,width:T,height:j},y);if(this._rctx.bindFramebuffer(M),this._rctx.setViewport(0,0,T,j),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(C,1),this._quad.bind(),this._program.setUniform2f(\"u_srcImageSize\",t.texture.descriptor.width,t.texture.descriptor.height),this._program.setUniform2fv(\"u_transformSpacing\",R.spacing),this._program.setUniform2fv(\"u_transformGridSize\",R.size),this._program.setUniform2f(\"u_targetImageSize\",T,j),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),C.dispose(),n){const t=new ImageData(M.descriptor.width,M.descriptor.height);return M.readPixels(0,0,M.descriptor.width,M.descriptor.height,p.RGBA,h.UNSIGNED_BYTE,t.data),M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o,imageData:t}}return M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o}}reprojectBitmapData(t,e){const r=s(t.bitmapData)?n(t.bitmapData):t.bitmapData,i=new w(this._rctx,{width:t.bitmapData.width,height:t.bitmapData.height,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:d.LINEAR,hasMipmap:!1},r),a=this.reprojectTexture({texture:i,extent:t.extent},e,!0);a.texture.dispose();const o=document.createElement(\"canvas\");o.width=a.imageData.width,o.height=a.imageData.height;return o.getContext(\"2d\").putImageData(a.imageData,0,0),{bitmapData:o,extent:a.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await t(e,{responseType:\"image\"})).data,s=document.createElement(\"canvas\");s.width=a.width,s.height=a.height;const n=s.getContext(\"2d\");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(b._instanceRefCount--,0===b._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),b._instance=null)):(this._quad.dispose(),this._program.dispose())}}b._instanceRefCount=0;export{b as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{isSome as s,isNone as a}from\"../../../core/maybe.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{queryToObject as l,objectToQuery as r}from\"../../../core/urlUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{load as m,project as c}from\"../../../geometry/projection.js\";import d from\"../../../geometry/SpatialReference.js\";import{getGraphics as y,fetchService as g,parseKML as w}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as u}from\"../../../rest/utils.js\";import{GraphicsCollection as _}from\"../../../support/GraphicsCollection.js\";import{Bitmap as b}from\"../engine/Bitmap.js\";import{BitmapContainer as V}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as f}from\"./LayerView2D.js\";import v from\"./graphics/GraphicContainer.js\";import S from\"./graphics/GraphicsView2D.js\";import I from\"../../layers/LayerView.js\";import{ImageReprojector as x}from\"../../support/imageReprojection.js\";class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends(f(I)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new V,this._kmlVisualData=new C,this.allVisiblePoints=new _,this.allVisiblePolylines=new _,this.allVisiblePolygons=new _,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new S({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new S({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new S({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.handles.add([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),o((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this.updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new x}detach(){this._fetchController.abort(),this._fetchController=null,this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null),this._imageReprojector&&(this._imageReprojector.destroy(),this._imageReprojector=null)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,p.fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new b(i.bitmapData,{immutable:!1,requestRenderOnSourceChangedEnabled:!0});t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:o,viewBoundScale:n,httpQuery:h}=e;if(s(o)){if(a(t))throw new Error(\"Loading this network link requires a view state.\");let y;if(await m(),s(n)&&1!==n){const e=new p(t.extent);e.expand(n),y=e}else y=t.extent;y=c(y,d.WGS84);const g=c(y,d.WebMercator),w=y.xmin,_=y.xmax,b=y.ymin,V=y.ymax,f=t.size[0]*t.pixelRatio,v=t.size[1]*t.pixelRatio,S=Math.max(g.width,g.height),I={\"[bboxWest]\":w.toString(),\"[bboxEast]\":_.toString(),\"[bboxSouth]\":b.toString(),\"[bboxNorth]\":V.toString(),\"[lookatLon]\":y.center.x.toString(),\"[lookatLat]\":y.center.y.toString(),\"[lookatRange]\":S.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":y.center.x.toString(),\"[lookatTerrainLat]\":y.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":y.center.x.toString(),\"[cameraLat]\":y.center.y.toString(),\"[cameraAlt]\":S.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":f.toString(),\"[vertPixels]\":v.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},x=e=>{for(const i in e)for(const t in I)e[i]=e[i].replace(t,I[t])},C=l(o);x(C);let j={};s(h)&&(j=l(h),x(j));const k=u(e.href);k.query={...k.query,...C,...j};return`${k.path}?${r(C)}`}return e.href}async _fetchService(e){const i=new C;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await y(s.points):[],a=s.polylines?await y(s.polylines):[],o=s.polygons?await y(s.polygons):[],l=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return g(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>w(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([n()],j.prototype,\"_pointsView\",void 0),e([n()],j.prototype,\"_polylinesView\",void 0),e([n()],j.prototype,\"_polygonsView\",void 0),e([n()],j.prototype,\"updating\",void 0),j=e([h(\"esri.views.2d.layers.KMLLayerView2D\")],j);const k=j;export{k as default};\n"],"names":["c","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","d","e","o","folders","t","slice","r","Map","n","i","f","a","l","featureCollection","layers","forEach","s","featureSet","features","geometryType","set","layerDefinition","objectIdField","G","groundOverlays","id","networkLinkIds","some","h","parentFolderId","networkLink","P","networkLinks","push","featureInfos","points","get","polylines","polygons","mapImages","type","fullExtent","j","u","sublayers","extent","g","findCredential","token","kmlServiceUrl","query","url","model","refresh","outSR","JSON","stringify","responseType","signal","S","arguments","length","undefined","map","read","includes","visible","unshift","attributes","async","b","y","fromJSON","m","drawingInfo","renderer","popupInfo","getSymbolAsync","symbol","popupTemplate","p","geometry","xmin","ymin","zmin","xmax","ymax","zmax","spatialReference","WGS84","constructor","this","_ownsRctx","_rctx","_instance","_instanceRefCount","document","createElement","getContext","getExtension","applyProjection","bilinear","bicubic","_program","programCache","acquire","shaders","vertexShader","fragmentShader","useProgram","setUniform1f","setUniform1i","_quad","reprojectTexture","x","texture","descriptor","width","height","D","T","Math","round","E","R","projectedExtent","srcBufferExtent","pixelSize","hasWrapAround","spacing","C","w","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","samplingMode","LINEAR","hasMipmap","M","_","colorTarget","TEXTURE","depthStencilTarget","NONE","bindFramebuffer","setViewport","bindTexture","bind","setUniform2f","setUniform2fv","size","draw","unbind","dispose","ImageData","readPixels","data","detachColorTexture","COLOR_ATTACHMENT0","imageData","reprojectBitmapData","bitmapData","putImageData","loadAndReprojectBitmapData","drawImage","getImageData","equals","destroy","allSublayers","allPoints","allPolylines","allPolygons","allMapImages","I","super","_bitmapIndex","_mapImageContainer","V","_kmlVisualData","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","hitTest","_this$_pointsView","_this$_polylinesView","_this$_polygonsView","layer","_pointsView","_polylinesView","_polygonsView","flat","filter","Boolean","sourceLayer","graphic","mapPoint","update","processUpdate","attach","_fetchController","AbortController","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","v","featuresTilingScheme","handles","add","on","added","_addMapImage","removed","_removeMapImage","visibleSublayers","visibility","_refreshCollections","updatingHandles","addPromise","_fetchService","_imageReprojector","detach","abort","removeAllChildren","clear","moveStart","viewChange","moveEnd","isUpdating","updating","isWGS84","isWebMercator","href","then","immutable","requestRenderOnSourceChangedEnabled","resolution","rotation","_getViewDependentUrl","viewFormat","viewBoundScale","httpQuery","Error","expand","WebMercator","pixelRatio","max","toString","center","replace","k","_objectSpread","concat","path","_loadVisualData","removeAll","addMany","_isSublayerVisible","sublayerId","_ref","item","_ref2","_ref3","_ref4","_fetchParsedKML","state","refreshInterval","removeChild","delete","prototype"],"sourceRoot":""}