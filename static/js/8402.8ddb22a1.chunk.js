"use strict";(self.webpackChunkdata_in_design=self.webpackChunkdata_in_design||[]).push([[5889,8402],{8402:(t,e,s)=>{s.r(e),s.d(e,{Solution:()=>h});var r=s(29408),o=s(71123),n=s(71350),i=s(65889);class h extends n.RendererThree{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main"),this.streetOSM=[],this.routesTreated=[],this.routesControl=[],this.zones30=[],this.meshStreet=void 0,this.meshSpike=void 0,this.raycaster=new r.tBo,this.pointer=new r.I9Y,this.sphere=void 0,this.camera.position.set(0,30,30),(0,o.getJSONFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/Paris/street_osm.geojson").then((t=>{for(let e=0;e<t.features.length;++e)this.streetOSM.push(t.features[e].geometry.coordinates);this.meshStreet=(0,i.renderLines)(this.scene,this.streetOSM,[.3,.3,.3]),(0,o.getJSONFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/Paris/treated-st.geojson").then((t=>{for(let e=0;e<t.features.length;++e)this.routesTreated.push(t.features[e].geometry.coordinates);this.meshSpike=a(this.scene,this.routesTreated,[1,0,0]),this.start()}))}))}update(t){for(let e=1;e<this.meshSpike.geometry.attributes.position.count;e+=2){let t=this.meshSpike.geometry.attributes.position,s=t.getX(e),o=t.getY(e),n=t.getZ(e);o=9*Math.sin(5*s*n+5*this.t),o=o<0?0:o;let i=new r.Pq0(s,o,n);this.meshSpike.geometry.attributes.position.setXYZ(e,i.x,i.y,i.z),this.meshSpike.geometry.attributes.color.setXYZ(e-1,0,o,0),this.meshSpike.geometry.attributes.color.setXYZ(e,o,0,0)}this.meshSpike.geometry.attributes.position.needsUpdate=!0,this.meshSpike.geometry.attributes.color.needsUpdate=!0,this.meshSpike.geometry.computeVertexNormals()}}const a=(t,e,s)=>{const o=new r.LoY,i=new r.mrM({vertexColors:!0}),h=[],a=[];let u=0,c=0,m=0;for(let r=0;r<e.length;++r){const t=e[r];for(let e=0;e<t.length;++e)for(let r=0;r<t[e].length;++r){const[o,i]=(0,n.MercatorProjection)(t[e][r][0],t[e][r][1]);u+=o,c+=i,m+=1;const l=.01*(o+-15478803.88731685),d=.01*(i+-4766681.448690384);h.push(l,0,d),h.push(l,10,d),a.push(s[0],s[1],s[2]),a.push(s[0],s[1],s[2])}}o.setAttribute("position",new r.qtW(h,3)),o.setAttribute("color",new r.qtW(a,3)),o.computeBoundingSphere();const l=new r.DXC(o,i);return t.add(l),l}},65889:(t,e,s)=>{s.r(e),s.d(e,{Solution:()=>i,renderLines:()=>h});var r=s(29408),o=s(71350),n=s(71123);class i extends o.RendererThree{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main"),this.streetOSM=[],this.routesTreated=[],this.routesControl=[],this.zones30=[];const t=new r.HiM(16777215,.8);this.camera.add(t),this.scene.add(t),this.camera.position.set(0,40,48);(0,n.getJSONFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/Paris/street_osm.geojson").then((t=>{for(let e=0;e<t.features.length;++e)this.streetOSM.push(t.features[e].geometry.coordinates);h(this.scene,this.streetOSM,[0,1,1]),(0,n.getJSONFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/Paris/treated-st.geojson").then((t=>{for(let e=0;e<t.features.length;++e)this.routesTreated.push(t.features[e].geometry.coordinates);h(this.scene,this.routesTreated,[1,0,0])})),(0,n.getJSONFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/Paris/control-st.geojson").then((t=>{for(let e=0;e<t.features.length;++e)this.routesControl.push(t.features[e].geometry.coordinates);h(this.scene,this.routesControl,[0,1,0])})),this.start()}))}}const h=(t,e,s)=>{const o=new r.LoY,i=new r.mrM({vertexColors:!0}),h=[],a=[],u=[];let c=0,m=0,l=0;for(let r=0;r<e.length;++r){const t=e[r];for(let e=0;e<t.length;++e)for(let r=0;r<t[e].length;++r){const[o,i]=(0,n.MercatorProjection)(t[e][r][0],t[e][r][1]);c+=o,m+=i,l+=1;const d=.01*(o+-15478803.88731685),g=.01*(i+-4766681.448690384);h.push(d,0,g),a.push(s[0],s[1],s[2]),r<t[e].length-1&&u.push(Math.floor(h.length/3)-1,Math.floor(h.length/3))}}o.setIndex(u),o.setAttribute("position",new r.qtW(h,3)),o.setAttribute("color",new r.qtW(a,3)),o.computeBoundingSphere();const d=new r.DXC(o,i);return t.add(d),d}}}]);
//# sourceMappingURL=8402.8ddb22a1.chunk.js.map