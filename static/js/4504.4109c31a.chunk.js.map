{"version":3,"file":"static/js/4504.4109c31a.chunk.js","mappings":"mTAIw8B,MAAMA,EAAEC,sBAAAA,CAAuBC,GAAG,MAAMC,EAAEC,EAAAA,EAAEC,SAASH,EAAEI,YAAYC,GAAEC,EAAAA,EAAAA,IAAEL,EAAED,EAAEO,MAAM,OAAOC,QAAQC,SAAQC,EAAAA,EAAAA,IAAEL,IAAIA,EAAEM,SAAS,CAAC,YAAMC,CAAOF,GAAG,MAAMV,QAAQK,EAAAA,EAAAA,GAAEK,EAAEG,KAAKH,EAAEI,SAAS,OAAOd,GAAGA,EAAEW,QAAQ,CAACI,SAAAA,CAAUf,GAAGA,EAAEI,WAAWF,EAAAA,EAAEC,SAASH,EAAEI,YAAYJ,EAAEgB,OAAOhB,EAAEgB,OAAOC,EAAAA,EAAEd,SAASH,EAAEgB,QAAQ,KAAK,MAAMf,EAAEiB,KAAKC,WAAWJ,UAAUf,GAAG,OAAOQ,QAAQC,SAAQC,EAAAA,EAAAA,IAAET,IAAIA,EAAEU,SAAS,CAAC,sBAAMS,CAAiBV,GAAE,IAAAW,EAACH,KAAKC,WAAWG,EAAAA,EAAEnB,SAASO,EAAEa,gBAAgBb,EAAEc,YAAY,mBAAiC,QAAlBH,EAAGH,KAAKC,kBAAU,IAAAE,OAAA,EAAfA,EAAiBI,aAAalB,QAAOW,KAAKC,WAAWM,aAAaD,WAAWd,EAAEc,WAAW,CAAC,0BAAME,CAAqBhB,GAAGQ,KAAKS,gBAAeC,EAAAA,EAAAA,IAAElB,EAAEmB,mBAAmB,CAAC,aAAMC,CAAQ9B,GAAG,MAAMC,EAAEiB,KAAKS,eAAeG,QAAQ,CAACd,OAAOC,EAAAA,EAAEd,SAASH,EAAEgB,QAAQe,mBAAmB/B,EAAE+B,mBAAmBC,KAAKhC,IAAGU,EAAAA,EAAAA,IAAEV,GAAGE,EAAAA,EAAEC,SAASH,GAAG,OAAOiC,iBAAiBjC,EAAEiC,mBAAmB,OAAOvB,EAAAA,EAAAA,IAAET,GAAGA,EAAEU,SAAS,IAAI,CAACuB,OAAAA,CAAQlC,GAAG,MAAMC,EAAEiB,KAAKC,WAAWgB,cAAcjC,EAAAA,EAAEC,SAASH,EAAEoC,eAAepC,EAAEqC,eAAe,OAAO7B,QAAQC,SAAQC,EAAAA,EAAAA,IAAET,IAAIA,EAAEU,SAAS,CAAC2B,4BAAAA,CAA6B5B,GAAG,MAAMV,GAAEuC,EAAAA,EAAAA,IAAErC,EAAAA,EAAEC,SAASO,EAAE0B,gBAAgB,OAAO5B,QAAQC,QAAQT,EAAE,CAACwC,KAAAA,CAAM9B,GAAG,MAAMV,GAAEyC,EAAAA,EAAAA,IAAEvC,EAAAA,EAAEC,SAASO,EAAE0B,eAAe1B,EAAEgC,SAAShC,EAAEiC,qBAAqB,OAAO3C,GAAGA,EAAE4C,SAAS,CAAClC,EAAET,KAAKD,EAAE6C,IAAI5C,EAAG,OAADS,QAAC,IAADA,OAAC,EAADA,EAAGC,SAAS,IAAIH,QAAQC,QAAQT,EAAE,CAAC,wBAAM8C,CAAmBpC,GAAE,IAAAqC,EAAC,MAAM9C,EAAES,EAAEsC,eAAehB,KAAKtB,GAAGA,EAAE,IAAIR,EAAAA,EAAEQ,GAAG,OAAOL,GAAE4C,EAAAA,EAAAA,IAAEhD,EAAES,EAAEwC,cAAc,CAACC,YAAYzC,EAAEyC,YAAYC,cAAc1C,EAAE0C,cAAcC,WAAW3C,EAAE2C,WAAWC,SAAS5C,EAAE4C,WAAW,IAAIb,EAAEb,EAAEvB,EAAE,OAAOK,EAAE6C,QAAQ3B,GAAE4B,EAAAA,EAAAA,IAAEnD,EAAEK,EAAE+C,cAAc/C,EAAE6C,MAAM7C,EAAEgD,cAAchD,EAAEiD,gBAAgBjD,EAAEkD,mBAAmBlD,EAAEmD,UAAUpB,GAAEqB,EAAAA,EAAAA,IAAEpD,EAAE+C,cAAc/C,EAAEmD,SAASjC,GAAE5B,EAAAA,EAAAA,KAAE+D,EAAAA,EAAAA,IAAEnC,EAAElB,EAAEsD,KAAK,YAAY,gBAAgBvB,KAAK,CAACrC,WAAY,QAAF2C,EAACnB,SAAC,IAAAmB,OAAA,EAADA,EAAGpC,SAASsD,qBAAqBxB,EAAE,CAAC,oBAAMyB,CAAexD,EAAEV,GAAG,MAAMC,EAAE,CAACY,KAAK,IAAIsD,aAAazD,EAAE0D,SAASC,QAAQC,KAAK,IAAIC,WAAW7D,EAAE0D,SAASI,YAAYC,MAAM/D,EAAE0D,SAASK,MAAMC,OAAOhE,EAAE0D,SAASM,SAASC,WAAWzE,EAAE0E,UAAUvE,SAASwE,EAAAA,EAAAA,IAAEnE,EAAEoE,SAASpE,EAAEqE,mBAAmB9E,EAAED,EAAEgF,QAAQ,MAAM,CAACC,OAAO,CAACC,aAAahF,EAAEmE,OAAOc,YAAY9E,EAAEgE,QAAQe,aAAa,CAAClF,EAAEmE,OAAOhE,EAAEgE,QAAQ,CAAC,6BAAMgB,CAAwB3E,GAAG,MAAMV,EAAEiB,EAAAA,EAAEd,SAASO,EAAE4E,iBAAiBpF,EAAEe,EAAAA,EAAEd,SAASO,EAAE6E,iBAAiB,IAAIlF,EAAE,KAAKK,EAAE8E,2BAA2BnF,EAAE,IAAIJ,EAAAA,EAAE,CAACwF,MAAM/E,EAAE8E,6BAA6B9E,EAAEgF,iBAAgBC,EAAAA,EAAAA,IAAE3F,EAAE4F,iBAAiB1F,EAAE0F,iBAAiBvF,WAAWwF,EAAAA,EAAAA,MAAI,MAAMpD,EAAE/B,EAAEoF,iBAAgBC,EAAAA,EAAAA,GAAErF,EAAEoF,iBAAiB,KAAK,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGvF,GAAC,IAAC4E,gBAAgBtF,EAAEuF,gBAAgBrF,EAAEgG,oBAAoB7F,EAAEyF,gBAAgBrD,IAAG,E","sources":["../node_modules/@arcgis/core/layers/support/RasterWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as r,unwrap as e}from\"../../core/maybe.js\";import t from\"../../geometry/support/GeographicTransformation.js\";import s from\"./PixelBlock.js\";import{decode as o}from\"./rasterFormats/RasterCodec.js\";import{split as i,mosaic as a,approximateTransform as n,getLocalArithmeticNorthRotations as m}from\"./rasterFunctions/pixelUtils.js\";import{create as l}from\"./rasterFunctions/rasterFunctionHelper.js\";import{requirePE as c,load as f,getProjectionOffsetGrid as p}from\"./rasterFunctions/rasterProjectionHelper.js\";import{estimateStatisticsHistograms as u}from\"./rasterFunctions/stretchUtils.js\";import{convertVectorFieldData as d,convertToLocalDirections as S}from\"./rasterFunctions/vectorFieldUtils.js\";import{readTransform as y}from\"./rasterTransforms/utils.js\";import h from\"../../renderers/support/RasterSymbolizer.js\";import{createFlowMesh as x}from\"../../views/2d/engine/flow/dataUtils.js\";import O from\"../../geometry/Extent.js\";class N{convertVectorFieldData(e){const t=s.fromJSON(e.pixelBlock),o=d(t,e.type);return Promise.resolve(r(o)&&o.toJSON())}async decode(r){const e=await o(r.data,r.options);return e&&e.toJSON()}symbolize(e){e.pixelBlock=s.fromJSON(e.pixelBlock),e.extent=e.extent?O.fromJSON(e.extent):null;const t=this.symbolizer.symbolize(e);return Promise.resolve(r(t)&&t.toJSON())}async updateSymbolizer(r){this.symbolizer=h.fromJSON(r.symbolizerJSON),r.histograms&&\"rasterStretch\"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=r.histograms)}async updateRasterFunction(r){this.rasterFunction=l(r.rasterFunctionJSON)}async process(e){const t=this.rasterFunction.process({extent:O.fromJSON(e.extent),primaryPixelBlocks:e.primaryPixelBlocks.map((e=>r(e)?s.fromJSON(e):null)),primaryRasterIds:e.primaryRasterIds});return r(t)?t.toJSON():null}stretch(e){const t=this.symbolizer.simpleStretch(s.fromJSON(e.srcPixelBlock),e.stretchParams);return Promise.resolve(r(t)&&t.toJSON())}estimateStatisticsHistograms(r){const e=u(s.fromJSON(r.srcPixelBlock));return Promise.resolve(e)}split(r){const e=i(s.fromJSON(r.srcPixelBlock),r.tileSize,r.maximumPyramidLevel);return e&&e.forEach(((r,t)=>{e.set(t,r?.toJSON())})),Promise.resolve(e)}async mosaicAndTransform(r){const t=r.srcPixelBlocks.map((r=>r?new s(r):null)),o=a(t,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo,clipOffset:r.clipOffset,clipSize:r.clipSize});let i,l=o;return r.coefs&&(l=n(o,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation)),r.projectDirections&&r.gcsGrid&&(i=m(r.destDimension,r.gcsGrid),l=e(S(l,r.isUV?\"vector-uv\":\"vector-magdir\",i))),{pixelBlock:l?.toJSON(),localNorthDirections:i}}async createFlowMesh(r,e){const t={data:new Float32Array(r.flowData.buffer),mask:new Uint8Array(r.flowData.maskBuffer),width:r.flowData.width,height:r.flowData.height},{vertexData:s,indexData:o}=await x(r.meshType,r.simulationSettings,t,e.signal);return{result:{vertexBuffer:s.buffer,indexBuffer:o.buffer},transferList:[s.buffer,o.buffer]}}async getProjectionOffsetGrid(r){const e=O.fromJSON(r.projectedExtent),s=O.fromJSON(r.srcBufferExtent);let o=null;r.datumTransformationSteps&&(o=new t({steps:r.datumTransformationSteps})),(r.includeGCSGrid||c(e.spatialReference,s.spatialReference,o))&&await f();const i=r.rasterTransform?y(r.rasterTransform):null;return p({...r,projectedExtent:e,srcBufferExtent:s,datumTransformation:o,rasterTransform:i})}}export{N as default};\n"],"names":["N","convertVectorFieldData","e","t","s","fromJSON","pixelBlock","o","d","type","Promise","resolve","r","toJSON","decode","data","options","symbolize","extent","O","this","symbolizer","updateSymbolizer","_this$symbolizer","h","symbolizerJSON","histograms","rendererJSON","updateRasterFunction","rasterFunction","l","rasterFunctionJSON","process","primaryPixelBlocks","map","primaryRasterIds","stretch","simpleStretch","srcPixelBlock","stretchParams","estimateStatisticsHistograms","u","split","i","tileSize","maximumPyramidLevel","forEach","set","mosaicAndTransform","_l","srcPixelBlocks","a","srcMosaicSize","blockWidths","alignmentInfo","clipOffset","clipSize","coefs","n","destDimension","sampleSpacing","interpolation","projectDirections","gcsGrid","m","S","isUV","localNorthDirections","createFlowMesh","Float32Array","flowData","buffer","mask","Uint8Array","maskBuffer","width","height","vertexData","indexData","x","meshType","simulationSettings","signal","result","vertexBuffer","indexBuffer","transferList","getProjectionOffsetGrid","projectedExtent","srcBufferExtent","datumTransformationSteps","steps","includeGCSGrid","c","spatialReference","f","rasterTransform","y","p","_objectSpread","datumTransformation"],"sourceRoot":""}