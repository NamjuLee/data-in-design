"use strict";(self.webpackChunkData_in_Design=self.webpackChunkData_in_Design||[]).push([[4490],{76279:(e,t,n)=>{n.d(t,{$X:()=>R,Gy:()=>C,P5:()=>T,SW:()=>v,Tr:()=>S,VV:()=>s,qj:()=>P});var i=n(30726),r=n(19902);const a=(e,t,n)=>[t,n],o=(e,t,n)=>[t,n,e[2]],l=(e,t,n)=>[t,n,e[2],e[3]];function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,i.Ru)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c(e,t){let{scale:n,translate:i}=e;return Math.round((t-i[0])/n[0])}function u(e,t){let{scale:n,translate:i}=e;return Math.round((i[1]-t)/n[1])}function h(e,t,n){const i=[];let r,a,o,l;for(let s=0;s<n.length;s++){const h=n[s];s>0?(o=c(e,h[0]),l=u(e,h[1]),o===r&&l===a||(i.push(t(h,o-r,l-a)),r=o,a=l)):(r=c(e,h[0]),a=u(e,h[1]),i.push(t(h,r,a)))}return i.length>0?i:null}function f(e,t){let{scale:n,translate:i}=e;return t*n[0]+i[0]}function g(e,t){let{scale:n,translate:i}=e;return i[1]-t*n[1]}function d(e,t,n){const i=new Array(n.length);if(!n.length)return i;const[r,a]=e.scale;let o=f(e,n[0][0]),l=g(e,n[0][1]);i[0]=t(n[0],o,l);for(let s=1;s<n.length;s++){const e=n[s];o+=e[0]*r,l-=e[1]*a,i[s]=t(e,o,l)}return i}function m(e,t,n){const i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=d(e,t,n[r]);return i}function p(e,t,n,i,r){var s;return t.points=null!==(s=function(e,t,n,i){return h(e,n?i?l:o:i?o:a,t)}(e,n.points,i,r))&&void 0!==s?s:[],t}function C(e,t,n,i,r){return t.x=c(e,n.x),t.y=u(e,n.y),t!==n&&(i&&(t.z=n.z),r&&(t.m=n.m)),t}function y(e,t,n,i,r){const s=function(e,t,n,i){const r=[],s=n?i?l:o:i?o:a;for(let a=0;a<t.length;a++){const n=h(e,s,t[a]);n&&n.length>=3&&r.push(n)}return r.length?r:null}(e,n.rings,i,r);return s?(t.rings=s,t):null}function w(e,t,n,i,r){const s=function(e,t,n,i){const r=[],s=n?i?l:o:i?o:a;for(let a=0;a<t.length;a++){const n=h(e,s,t[a]);n&&n.length>=2&&r.push(n)}return r.length?r:null}(e,n.paths,i,r);return s?(t.paths=s,t):null}function P(e,t){return e&&t?(0,r.fT)(t)?C(e,{},t,!1,!1):(0,r.Rg)(t)?w(e,{},t,!1,!1):(0,r.Bi)(t)?y(e,{},t,!1,!1):(0,r.U9)(t)?p(e,{},t,!1,!1):(0,r.ZC)(t)?function(e,t,n,i,r){return t.xmin=c(e,n.xmin),t.ymin=u(e,n.ymin),t.xmax=c(e,n.xmax),t.ymax=u(e,n.ymax),t!==n&&(i&&(t.zmin=n.zmin,t.zmax=n.zmax),r&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}(e,{},t,!1,!1):null:null}function v(e,t,n,r,s){return(0,i.Ru)(n)&&(t.points=function(e,t,n,i){return d(e,n?i?l:o:i?o:a,t)}(e,n.points,r,s)),t}function S(e,t,n,r,a){return(0,i.$I)(n)||(t.x=f(e,n.x),t.y=g(e,n.y),t!==n&&(r&&(t.z=n.z),a&&(t.m=n.m))),t}function R(e,t,n,r,s){return(0,i.Ru)(n)&&(t.rings=function(e,t,n,i){return m(e,n?i?l:o:i?o:a,t)}(e,n.rings,r,s)),t}function T(e,t,n,r,s){return(0,i.Ru)(n)&&(t.paths=function(e,t,n,i){return m(e,n?i?l:o:i?o:a,t)}(e,n.paths,r,s)),t}},28808:(e,t,n)=>{var i,r,a,o,l,s,c,u,h,f,g,d,m,p,C,y,w,P,v,S,R,T,M,x,L,b,A,B,D,O,z,I,N,F,_,E,k,W,U,G,H,X,Y,q,Q,Z,J,j,V,$,K,ee,te,ne,ie,re,ae,oe,le,se,ce;n.d(t,{$2:()=>l,C1:()=>a,JO:()=>r,M1:()=>T,O$:()=>ae,Q1:()=>Z,TZ:()=>y,WE:()=>B,Y:()=>c,YI:()=>j,bj:()=>u,e_:()=>Q,f0:()=>re,fu:()=>g,g7:()=>h,ip:()=>J,mU:()=>D,oF:()=>S,uQ:()=>R,uT:()=>E,vG:()=>le,wd:()=>G,xR:()=>i,xn:()=>w,xw:()=>L,yS:()=>k}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(a||(a={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(o||(o={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(l||(l={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(s||(s={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(c||(c={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(u||(u={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(h||(h={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(f||(f={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(g||(g={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(d||(d={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(m||(m={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(p||(p={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(C||(C={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(y||(y={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(w||(w={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(P||(P={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(v||(v={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(S||(S={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(R||(R={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(T||(T={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(M||(M={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(x||(x={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(L||(L={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(b||(b={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(A||(A={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(B||(B={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(D||(D={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(O||(O={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(z||(z={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(I||(I={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(N||(N={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(F||(F={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(_||(_={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(E||(E={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(k||(k={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(W||(W={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(U||(U={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(G||(G={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(H||(H={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(X||(X={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(Y||(Y={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(q||(q={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(Q||(Q={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(Z||(Z={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(J||(J={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(j||(j={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(V||(V={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}($||($={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(K||(K={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ee||(ee={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(te||(te={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ne||(ne={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ie||(ie={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(re||(re={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(ae||(ae={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(oe||(oe={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(le||(le={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(se||(se={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(ce||(ce={}))},28932:(e,t,n)=>{n.d(t,{previewCIMSymbol:()=>b});var i,r,a=n(76931),o=n(401),l=n(69539),s=n(3825),c=n(30726),u=n(50346),h=n(92746),f=n(24269),g=n(17764),d=n(36541),m=n(62706),p=n(97763),C=n(29632),y=n(93223);(r=i||(i={})).Legend="legend",r.Preview="preview";const w=e=>e&&e.scaleFactor?e.scaleFactor:1,P=96/72;var v=n(65709),S=n(76442);const R=new class{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new m.A,this._cimResourceManager=new f.A,this._rasterizer=new d.A(this._cimResourceManager)}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,n,i,r,a,l,s){if(!e)return null;const{data:c}=e;if(!c||"CIMSymbolReference"!==c.type||!c.symbol)return null;const{symbol:u}=c;a||(a=(0,p.n5)(u));const h=await o.$N.resolveSymbolOverrides(c,t,this._spatialReference,r,a,l,s);this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const f=this._imageDataCanvas,d=this._cimResourceManager,m=[];o.wp.fetchResources(h,d,m),m.length>0&&await Promise.all(m);const{width:C,height:y}=n,w=function(e,t,n,i){const r=1,a=-t/2+r,o=t/2-r,l=n/2-r,s=-n/2+r;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[a,0],[0,0],[o,0]]]};default:return"legend"===i?{rings:[[[a,l],[o,0],[o,s],[a,s],[a,l]]]}:{rings:[[[a,l],[o,l],[o,s],[a,s],[a,l]]]}}}(a,C,y,i),v=o.wp.getEnvelope(h,w,d);if(!v)return null;const S=(window.devicePixelRatio||1)*P;let R=1,T=0,M=0;switch(u.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;v.width>C&&(e=C/v.width);let t=1;v.height>y&&(t=y/v.height),"preview"===i&&(v.width<C&&(e=C/v.width),v.height<y&&(t=y/v.height)),R=Math.min(e,t),T=v.x+v.width/2,M=v.y+v.height/2}break;case"CIMLineSymbol":{let e=1;v.height>y&&(e=y/v.height),R=e,M=v.y+v.height/2;const t=v.x*R+C/2,n=(v.x+v.width)*R+C/2;if(t<0){const{paths:e}=w;e[0][0][0]-=t}if(n>C){const{paths:e}=w;e[0][2][0]-=n-C}}break;case"CIMPolygonSymbol":{T=v.x+v.width/2,M=v.y+v.height/2;const e=v.x*R+C/2,t=(v.x+v.width)*R+C/2,n=v.y*R+y/2,i=(v.y+v.height)*R+y/2,{rings:r}=w;e<0&&(r[0][0][0]-=e,r[0][3][0]-=e,r[0][4][0]-=e),n<0&&(r[0][0][1]+=n,r[0][1][1]+=n,r[0][4][1]+=n),t>C&&(r[0][1][0]-=t-C,r[0][2][0]-=t-C),i>y&&(r[0][2][1]+=i-y,r[0][3][1]+=i-y)}}f.width=C*S,f.height=y*S;f.width+=2,f.height+=2;const x=f.getContext("2d"),L=g.IT.createIdentity();return L.translate(-T,-M),L.scale(R*S,-R*S),L.translate(C*S/2+1,y*S/2+1),x.clearRect(0,0,f.width,f.height),new g.Rj(x,d,L,!0).drawSymbol(h,w),x.getImageData(0,0,f.width,f.height)}async analyzeCIMSymbol(e,t,n,i,r){const a=[],o=t?{geometryType:i,spatialReference:this._spatialReference,fields:t}:null;let l;await(0,h.I)(e.data,o,this._cimResourceManager,a,this._avoidSDF),(0,u.Te)(r);for(const s of a)"CIMPictureMarker"!==s.cim.type&&"CIMPictureFill"!==s.cim.type&&"CIMPictureStroke"!==s.cim.type||(l||(l=[]),l.push(this._fetchPictureMarkerResource(s,r))),n&&"text"===s.type&&"string"==typeof s.text&&s.text.includes("[")&&(s.text=(0,p.P3)(n,s.text,s.cim.textCase));return l&&await Promise.all(l),a}rasterizeCIMSymbol3D(e,t,n,i,r,a){const o=[];for(const l of e){i&&"function"==typeof i.scaleFactor&&(i.scaleFactor=i.scaleFactor(t,r,a));const e=this._getRasterizedResource(l,t,n,i,r,a);if(!e)continue;let s=0,c=e.anchorX||0,u=e.anchorY||0,h=!1,f=0,g=0;if("esriGeometryPoint"===n){const e=w(i);if(f=(0,p.s4)(l.offsetX,t,r,a)*e||0,g=(0,p.s4)(l.offsetY,t,r,a)*e||0,"marker"===l.type)s=(0,p.s4)(l.rotation,t,r,a)||0,h=!!l.rotateClockwise&&l.rotateClockwise;else if("text"===l.type){if(s=(0,p.s4)(l.angle,t,r,a)||0,void 0!==l.horizontalAlignment)switch(l.horizontalAlignment){case"left":c=-.5;break;case"right":c=.5;break;default:c=0}if(void 0!==l.verticalAlignment)switch(l.verticalAlignment){case"top":u=.5;break;case"bottom":u=-.5;break;case"baseline":u=-.25;break;default:u=0}}}null!=e&&o.push({angle:s,rotateClockWise:h,anchorX:c,anchorY:u,offsetX:f,offsetY:g,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement("canvas"),n=(0,c.T7)(t.getContext("2d"));let i=0,r=0,o=0,l=0;const s=[];for(let c=0;c<e.length;c++){const t=e[c],u=t.rasterizedResource;if(!u)continue;const h=u.size,f=t.offsetX,g=t.offsetY,d=t.anchorX,m=t.anchorY,p=t.rotateClockWise||!1;let C=t.angle,y=(0,a.Lz)(f)-h[0]*(.5+d),w=(0,a.Lz)(g)-h[1]*(.5+m),P=y+h[0],v=w+h[1];if(C){p&&(C=-C);const e=Math.sin(C*Math.PI/180),t=Math.cos(C*Math.PI/180),n=y*t-w*e,i=y*e+w*t,r=y*t-v*e,a=y*e+v*t,o=P*t-v*e,l=P*e+v*t,s=P*t-w*e,c=P*e+w*t;y=Math.min(n,r,o,s),w=Math.min(i,a,l,c),P=Math.max(n,r,o,s),v=Math.max(i,a,l,c)}i=y<i?y:i,r=w<r?w:r,o=P>o?P:o,l=v>l?v:l;const S=n.createImageData(u.size[0],u.size[1]);S.data.set(new Uint8ClampedArray(u.image.buffer));const R={offsetX:f,offsetY:g,rotateClockwise:p,angle:C,rasterizedImage:S,anchorX:d,anchorY:m};s.push(R)}t.width=o-i,t.height=l-r;const u=-i,h=l;for(let c=0;c<s.length;c++){const e=s[c],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,r=e.rasterizedImage.height,o=u-i*(.5+e.anchorX),l=h-r*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;n.save(),n.translate((0,a.Lz)(e.offsetX),-(0,a.Lz)(e.offsetY)),n.translate(u,h),n.rotate(i),n.translate(-u,-h),n.drawImage(t,o,l),n.restore()}else n.drawImage(t,o+(0,a.Lz)(e.offsetX),l-(0,a.Lz)(e.offsetY))}const f=new y.Q({x:u/t.width-.5,y:h/t.height-.5});return{imageData:0!==t.width&&0!==t.height?n.getImageData(0,0,t.width,t.height):n.createImageData(1,1),anchorPosition:f}}async _fetchPictureMarkerResource(e,t){const n=e.materialHash;if(!this._pictureMarkerCache.get(n)){const i=(await(0,s.default)(e.cim.url,{responseType:"image",signal:t&&t.signal})).data;this._pictureMarkerCache.set(n,i)}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const t=this._imageDataCanvas,n=(0,c.T7)(t.getContext("2d"));return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t}_imageTo32Array(e,t,n,i){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const r=this._imageDataCanvas,a=(0,c.T7)(r.getContext("2d"));if(r.width=t,r.height=n,a.drawImage(e,0,0,t,n),i){a.save();const r=new l.A(i);a.fillStyle=r.toHex(),a.globalCompositeOperation="multiply",a.fillRect(0,0,t,n),a.globalCompositeOperation="destination-atop",a.drawImage(e,0,0,t,n),a.restore()}return new Uint32Array(a.getImageData(0,0,t,n).data.buffer)}_getRasterizedResource(e,t,n,i,r,a){let o,l,s;if("text"===e.type)return this._rasterizeTextResource(e,t,i,r,a);({analyzedCIM:o,hash:l}=function(e,t,n,i){let r,a;"function"==typeof e.materialHash?(r=(0,e.materialHash)(t,n,i),a=(0,h.G)(e.cim,e.materialOverrides)):(r=e.materialHash,a=e.cim);return{analyzedCIM:a,hash:r}}(e,t,r,a));const u=w(i);if("CIMPictureMarker"===e.cim.type){const n=(0,p.s4)(e.size,t,r,a)*u,{image:i,width:o,height:l}=(0,c.T7)(this._getPictureResource(e,n,(0,p.s4)(e.color,t,r,a)));return s={image:i,size:[o,l],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},s}(0,C.mR)(o,u,{preserveOutlineWidth:!1});const f=o;l+=n,i&&(l+=JSON.stringify(i));const g=this._resourceCache;return g.has(l)?g.get(l):(s=this._rasterizer.rasterizeJSONResource({cim:f,type:e.type,url:e.url,mosaicHash:l,size:null,path:null},window.devicePixelRatio||1,this._avoidSDF),g.set(l,s),s)}_rasterizeTextResource(e,t,n,i,r){const a=w(n),o=(0,p.s4)(e.text,t,i,r);if(!o||0===o.length)return null;const l=(0,p.s4)(e.fontName,t,i,r),s=(0,p.s4)(e.style,t,i,r),c=(0,p.s4)(e.weight,t,i,r),u=(0,p.s4)(e.decoration,t,i,r),h=(0,p.s4)(e.size,t,i,r)*a,f=(0,p.s4)(e.horizontalAlignment,t,i,r),g=(0,p.s4)(e.verticalAlignment,t,i,r),d=(0,p.G9)((0,p.s4)(e.color,t,i,r)),m=(0,p.G9)((0,p.s4)(e.outlineColor,t,i,r)),C={color:d,size:h,horizontalAlignment:f,verticalAlignment:g,font:{family:l,style:s,weight:c,decoration:u},halo:{size:(0,p.s4)(e.outlineSize,t,i,r)||0,color:m,style:s},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_getPictureResource(e,t,n){const i=this._pictureMarkerCache.get(e.materialHash);if(!i)return null;const r=i.height/i.width,o=t?r>1?(0,a.Lz)(t):(0,a.Lz)(t)/r:i.width,l=t?r>1?(0,a.Lz)(t)*r:(0,a.Lz)(t):i.height;return{image:this._imageTo32Array(i,o,l,n),width:o,height:l}}}(null,!0),T=(0,a.PN)(v.CB.size),M=(0,a.PN)(v.CB.maxSize),x=(0,a.PN)(v.CB.lineWidth),L=1;async function b(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:r,opacity:l,symbolConfig:s}=n,c="object"==typeof s&&"isSquareFill"in s&&s.isSquareFill,u=n.cimOptions||n,h=u.geometryType||(0,p.n5)(null===(t=e)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.symbol),f=function(e){const t=null===e||void 0===e?void 0:e.size;return"number"==typeof t?{width:t,height:t}:{width:null!=t&&"object"==typeof t&&"width"in t?t.width:null,height:null!=t&&"object"==typeof t&&"height"in t?t.height:null}}(n),{feature:g,fieldMap:d}=u;if(null==f.width||null==f.height){const t=await o.$N.resolveSymbolOverrides(e.data,g,null,d,h);if(!t)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:t},e.data.primitiveOverrides=null;const n=[];o.wp.fetchResources(t,R.resourceManager,n),n.length>0&&await Promise.all(n);const{width:i,height:r}=o.wp.getEnvelope(t,null,R.resourceManager);f.width="esriGeometryPolygon"===h?T:"esriGeometryPolyline"===h?x:null!=i&&isFinite(i)?Math.min(i,M):T,f.height="esriGeometryPolygon"===h?T:null!=r&&isFinite(r)?Math.max(Math.min(r,M),L):T}const m=await R.rasterizeCIMSymbolAsync(e,g,f,c||"esriGeometryPolygon"!==h?i.Preview:i.Legend,d,h);if(!m)return null;const{width:C,height:y}=m,w=document.createElement("canvas");w.width=C,w.height=y,w.getContext("2d").putImageData(m,0,0);const P=(0,a.Lz)(f.width),v=(0,a.Lz)(f.height),b=new Image(P,v);b.src=w.toDataURL(),null!=l&&(b.style.opacity="".concat(l));let A=b;if(null!=n.effectView){const e={shape:{type:"image",x:0,y:0,width:P,height:v,src:b.src},fill:null,stroke:null,offset:[0,0]};A=(0,S.f)([[e]],[P,v],{effectView:n.effectView})}return r&&A&&r.appendChild(A),A}},71447:(e,t,n)=>{var i,r;function a(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":return i.Center}}function o(e){switch(e){case"top":return r.Top;case"middle":return r.Center;case"baseline":return r.Baseline;case"bottom":return r.Bottom}}function l(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[i.Right,r.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[i.Center,r.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[i.Left,r.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[i.Right,r.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[i.Center,r.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[i.Left,r.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[i.Right,r.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[i.Center,r.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[i.Left,r.Top];default:return console.debug("Found invalid placement type ".concat(e)),[i.Center,r.Center]}}function s(e){switch(e){case i.Right:return-1;case i.Center:return 0;case i.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(e)),0}}function c(e){switch(e){case r.Top:return 1;case r.Center:return 0;case r.Bottom:case r.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(e)),0}}function u(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":return i.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}n.d(t,{Dy:()=>c,UD:()=>o,fO:()=>l,gy:()=>r,iT:()=>s,nE:()=>h,oX:()=>i,p1:()=>u,xy:()=>a}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(i||(i={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(r||(r={}))},5095:(e,t,n)=>{n.d(t,{Aq:()=>U,D8:()=>_,ER:()=>M,EU:()=>ne,GW:()=>d,Ge:()=>N,HX:()=>m,Ig:()=>q,Jn:()=>V,MB:()=>Q,ML:()=>B,MO:()=>$,OZ:()=>o,Ot:()=>P,Oz:()=>p,QK:()=>f,Qf:()=>b,R6:()=>D,R9:()=>g,Rs:()=>L,Sy:()=>te,T4:()=>H,Tp:()=>z,UQ:()=>S,Vb:()=>C,Vw:()=>w,Z:()=>R,_Q:()=>Y,_p:()=>j,aQ:()=>y,ah:()=>i,b$:()=>Z,bu:()=>W,cj:()=>h,dn:()=>a,ev:()=>l,hx:()=>x,jG:()=>K,k3:()=>u,k6:()=>ee,lE:()=>G,lt:()=>c,mZ:()=>O,oQ:()=>X,of:()=>I,pK:()=>A,qj:()=>s,rr:()=>k,sg:()=>v,st:()=>E,ts:()=>J,vl:()=>F,xL:()=>r,xd:()=>T});const i=1e-30,r=4294967295,a=512,o=8,l=10,s=29,c=24,u=8,h={metrics:{width:15,height:17,left:0,top:-7,advance:14}},f=0,g=0,d=0,m=1,p=2,C=3,y=4,w=5,P=6,v=12,S=5,R=6,T=5,M=6,x=0,L=1,b=2,A=3,B=4,D=2,O=1,z=2,I=4,N=1.05,F=3,_=5,E=6,k=1.15,W=2,U=8,G=500,H=10,X=1024,Y=2,q=0,Q=1,Z=4,J=8,j=16,V=4,$=1,K=4,ee=128,te=4,ne=2},99588:(e,t,n)=>{n.d(t,{M9:()=>a,Pl:()=>r,Ss:()=>o});const i=new Float32Array(1);new Uint32Array(i.buffer);function r(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function a(e,t){return 65535&e|t<<16}function o(e,t,n,i){return 255&e|(255&t)<<8|(255&n)<<16|i<<24}}}]);
//# sourceMappingURL=4490.a32a1ba9.chunk.js.map