"use strict";(self.webpackChunkdata_in_design=self.webpackChunkdata_in_design||[]).push([[4788],{38983:(e,t,r)=>{r.d(t,{e:()=>o});var n,s,i,a={exports:{}};n=a,s=function(){function e(e,r,s){s=s||2;var i,a,o,c,u,h,v,y=r&&r.length,f=y?r[0]*s:e.length,d=t(e,0,f,s,!0),p=[];if(!d||d.next===d.prev)return p;if(y&&(d=l(e,r,d,s)),e.length>80*s){i=o=e[0],a=c=e[1];for(var x=s;x<f;x+=s)(u=e[x])<i&&(i=u),(h=e[x+1])<a&&(a=h),u>o&&(o=u),h>c&&(c=h);v=0!==(v=Math.max(o-i,c-a))?1/v:0}return n(d,p,s,i,a,v),p}function t(e,t,r,n,s){var i,a;if(s===I(e,t,r,n)>0)for(i=t;i<r;i+=n)a=V(i,e[i],e[i+1],a);else for(i=r-n;i>=t;i-=n)a=V(i,e[i],e[i+1],a);if(a&&g(a,a.next)){var o=a.next;M(a),a=o}return a}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!g(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{var s=n.prev;if(M(n),(n=t=s)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,l,c,u,h,v){if(e){!v&&h&&y(e,c,u,h);for(var f,d,p=e;e.prev!==e.next;)if(f=e.prev,d=e.next,h?i(e,c,u,h):s(e))t.push(f.i/l),t.push(e.i/l),t.push(d.i/l),M(e),e=d.next,p=d.next;else if((e=d)===p){v?1===v?n(e=a(r(e),t,l),t,l,c,u,h,2):2===v&&o(e,t,l,c,u,h):n(r(e),t,l,c,u,h,1);break}}}function s(e){var t=e.prev,r=e,n=e.next;if(m(t,r,n)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(p(t.x,t.y,r.x,r.y,n.x,n.y,s.x,s.y)&&m(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function i(e,t,r,n){var s=e.prev,i=e,a=e.next;if(m(s,i,a)>=0)return!1;for(var o=s.x<i.x?s.x<a.x?s.x:a.x:i.x<a.x?i.x:a.x,l=s.y<i.y?s.y<a.y?s.y:a.y:i.y<a.y?i.y:a.y,c=s.x>i.x?s.x>a.x?s.x:a.x:i.x>a.x?i.x:a.x,u=s.y>i.y?s.y>a.y?s.y:a.y:i.y>a.y?i.y:a.y,h=f(o,l,t,r,n),v=f(c,u,t,r,n),y=e.prevZ,d=e.nextZ;y&&y.z>=h&&d&&d.z<=v;){if(y!==e.prev&&y!==e.next&&p(s.x,s.y,i.x,i.y,a.x,a.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,d!==e.prev&&d!==e.next&&p(s.x,s.y,i.x,i.y,a.x,a.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;y&&y.z>=h;){if(y!==e.prev&&y!==e.next&&p(s.x,s.y,i.x,i.y,a.x,a.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;d&&d.z<=v;){if(d!==e.prev&&d!==e.next&&p(s.x,s.y,i.x,i.y,a.x,a.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function a(e,t,n){var s=e;do{var i=s.prev,a=s.next.next;!g(i,a)&&S(i,s,s.next,a)&&T(i,a)&&T(a,i)&&(t.push(i.i/n),t.push(s.i/n),t.push(a.i/n),M(s),M(s.next),s=e=a),s=s.next}while(s!==e);return r(s)}function o(e,t,s,i,a,o){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&x(l,c)){var u=w(l,c);return l=r(l,l.next),u=r(u,u.next),n(l,t,s,i,a,o),void n(u,t,s,i,a,o)}c=c.next}l=l.next}while(l!==e)}function l(e,n,s,i){var a,o,l,u=[];for(a=0,o=n.length;a<o;a++)(l=t(e,n[a]*i,a<o-1?n[a+1]*i:e.length,i,!1))===l.next&&(l.steiner=!0),u.push(d(l));for(u.sort(c),a=0;a<u.length;a++)s=r(s=h(u[a],s),s.next);return s}function c(e,t){return e.x-t.x}function u(e){if(e.next.prev===e)return e;let t=e;for(;;){const r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function h(e,t){var n=function(e,t){var r,n=t,s=e.x,i=e.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var o=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=s&&o>a){if(a=o,o===s){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(s===a)return r;var l,c=r,u=r.x,h=r.y,y=1/0;n=r;do{s>=n.x&&n.x>=u&&s!==n.x&&p(i<h?s:a,i,u,h,i<h?a:s,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(s-n.x),T(n,e)&&(l<y||l===y&&(n.x>r.x||n.x===r.x&&v(r,n)))&&(r=n,y=l)),n=n.next}while(n!==c);return r}(e,t);if(!n)return t;var s=w(n,e),i=r(n,n.next);let a=u(s);return r(a,a.next),i=u(i),u(t===n?i:t)}function v(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function y(e,t,r,n){var s=e;do{null===s.z&&(s.z=f(s.x,s.y,t,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,r,n,s,i,a,o,l,c=1;do{for(r=e,e=null,i=null,a=0;r;){for(a++,n=r,o=0,t=0;t<c&&(o++,n=n.nextZ);t++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(s=r,r=r.nextZ,o--):(s=n,n=n.nextZ,l--),i?i.nextZ=s:e=s,s.prevZ=i,i=s;r=n}i.nextZ=null,c*=2}while(a>1)}(s)}function f(e,t,r,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function p(e,t,r,n,s,i,a,o){return(s-a)*(t-o)-(e-a)*(i-o)>=0&&(e-a)*(n-o)-(r-a)*(t-o)>=0&&(r-a)*(i-o)-(s-a)*(n-o)>=0}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&S(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(T(e,t)&&T(t,e)&&function(e,t){var r=e,n=!1,s=(e.x+t.x)/2,i=(e.y+t.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&s<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||g(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function S(e,t,r,n){var s=_(m(e,t,r)),i=_(m(e,t,n)),a=_(m(r,n,e)),o=_(m(r,n,t));return s!==i&&a!==o||!(0!==s||!b(e,r,t))||!(0!==i||!b(e,n,t))||!(0!==a||!b(r,e,n))||!(0!==o||!b(r,t,n))}function b(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function _(e){return e>0?1:e<0?-1:0}function T(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function w(e,t){var r=new L(e.i,e.x,e.y),n=new L(t.i,t.x,t.y),s=e.next,i=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function V(e,t,r,n){var s=new L(e,t,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function L(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,r,n){for(var s=0,i=t,a=r-n;i<r;i+=n)s+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return s}return e.deviation=function(e,t,r,n){var s=t&&t.length,i=s?t[0]*r:e.length,a=Math.abs(I(e,0,i,r));if(s)for(var o=0,l=t.length;o<l;o++){var c=t[o]*r,u=o<l-1?t[o+1]*r:e.length;a-=Math.abs(I(e,c,u,r))}var h=0;for(o=0;o<n.length;o+=3){var v=n[o]*r,y=n[o+1]*r,f=n[o+2]*r;h+=Math.abs((e[v]-e[f])*(e[y+1]-e[v+1])-(e[v]-e[y])*(e[f+1]-e[v+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,s=0;s<e.length;s++){for(var i=0;i<e[s].length;i++)for(var a=0;a<t;a++)r.vertices.push(e[s][i][a]);s>0&&(n+=e[s-1].length,r.holes.push(n))}return r},e},void 0!==(i=s())&&(n.exports=i);const o=a.exports},93795:(e,t,r)=>{function n(e){return e=e||globalThis.location.hostname,c.some((t=>{var r;return null!=(null===(r=e)||void 0===r?void 0:r.match(t))}))}function s(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(i)||null!=t.match(o)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(a)||null!=t.match(l)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}r.d(t,{EM:()=>s,b5:()=>n});const i=/^devext.arcgis.com$/,a=/^qaext.arcgis.com$/,o=/^[\w-]*\.mapsdevext.arcgis.com$/,l=/^[\w-]*\.mapsqa.arcgis.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,i,a,/^jsapps.esri.com$/,o,l]},40480:(e,t,r)=>{r.d(t,{Tq:()=>l,dy:()=>a,p6:()=>o});Number.POSITIVE_INFINITY,Math.PI;const n=256/360,s=1/Math.LN2;function i(e,t){return(e%=t)>=0?e:e+t}function a(e){return i(e*n,256)}function o(e){return Math.log(e)*s}function l(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}},71447:(e,t,r)=>{var n,s;function i(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function a(e){switch(e){case"top":return s.Top;case"middle":return s.Center;case"baseline":return s.Baseline;case"bottom":return s.Bottom}}function o(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[n.Right,s.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[n.Center,s.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[n.Left,s.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[n.Right,s.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[n.Center,s.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[n.Left,s.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[n.Right,s.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[n.Center,s.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[n.Left,s.Top];default:return console.debug("Found invalid placement type ".concat(e)),[n.Center,s.Center]}}function l(e){switch(e){case n.Right:return-1;case n.Center:return 0;case n.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(e)),0}}function c(e){switch(e){case s.Top:return 1;case s.Center:return 0;case s.Bottom:case s.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(e)),0}}function u(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}r.d(t,{Dy:()=>c,UD:()=>a,fO:()=>o,gy:()=>s,iT:()=>l,nE:()=>h,oX:()=>n,p1:()=>u,xy:()=>i}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(n||(n={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(s||(s={}))},64274:(e,t,r)=>{r.d(t,{A1:()=>v,Fb:()=>u,K_:()=>m,PH:()=>g,Zl:()=>h,ar:()=>y,dZ:()=>_,ir:()=>b,q7:()=>c,r9:()=>S,tq:()=>l});var n=r(8),s=r(50076),i=r(71447),a=r(61551);const o=Object.keys(a.w4).filter((e=>"number"==typeof a.w4[e])).reduce(((e,t)=>(0,n.A)((0,n.A)({},e),{},{[t]:a.w4[t]})),{});function l(e){return e===a.w4.OUTLINE_FILL||e===a.w4.OUTLINE_FILL_SIMPLE}function c(e){return function(e){return e===a.w4.SIMPLE||e===a.w4.OUTLINE_FILL_SIMPLE}(e.symbologyType)}function u(e){return l(e.symbologyType)}function h(e,t){switch(e){case a.ZG.FILL:return m.from(t);case a.ZG.LINE:return S.from(t);case a.ZG.MARKER:return g.from(t);case a.ZG.TEXT:return b.from(t);case a.ZG.LABEL:return _.from(t);default:throw new Error("Unable to createMaterialKey for unknown geometryType ".concat(e))}}function v(e){switch(y.load(e).geometryType){case a.ZG.MARKER:return new g(e);case a.ZG.FILL:return new m(e);case a.ZG.LINE:return new S(e);case a.ZG.TEXT:return new b(e);case a.ZG.LABEL:return new _(e)}}class y{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(e){this.setBits(e,21,26)}get geometryTypeString(){switch(this.geometryType){case a.ZG.FILL:return"fill";case a.ZG.MARKER:return"marker";case a.ZG.LINE:return"line";case a.ZG.TEXT:return"text";case a.ZG.LABEL:return"label";default:throw new s.A("Unable to handle unknown geometryType: ".concat(this.geometryType))}}setBit(e,t){const r=1<<e;t?this._data|=r:this._data&=~r}bit(e){return(this._data&1<<e)>>e}setBits(e,t,r){for(let n=t,s=0;n<r;n++,s++)this.setBit(n,0!=(e&1<<s))}bits(e,t){let r=0;for(let n=e,s=0;n<t;n++,s++)r|=this.bit(n)<<s;return r}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:a.w4[this.symbologyType],options:o,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}y.shared=new y(0);const f=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const r=function(e,t,r){const n=a.rU.SIZE_FIELD_STOPS|a.rU.SIZE_MINMAX_VALUE|a.rU.SIZE_SCALE_STOPS|a.rU.SIZE_UNIT_VALUE,s=(t&(a.q0.FIELD_TARGETS_OUTLINE|a.q0.MINMAX_TARGETS_OUTLINE|a.q0.SCALE_TARGETS_OUTLINE|a.q0.UNIT_TARGETS_OUTLINE))>>>4;return e===a.ZG.LINE&&r.isOutline||e===a.ZG.FILL&&l(r.symbologyType)?n&s:n&~s}(this.geometryType,e,t)&e;this.vvSizeMinMaxValue=!!(r&a.rU.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&a.rU.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&a.rU.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&a.rU.SIZE_SCALE_STOPS)}},d=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&a.rU.ROTATION)}},p=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&a.rU.COLOR)}},x=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&a.rU.OPACITY)}};class m extends(p(x(f(y)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=a.ZG.FILL,n.symbologyType=t,t!==a.w4.DOT_DENSITY&&n.setVV(r,e),n.data}getVariation(){return(0,n.A)((0,n.A)({},super.getVariation()),{},{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}m.shared=new m(0);class g extends(p(x(d(f(y))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=a.ZG.MARKER,n.symbologyType=t,t!==a.w4.HEATMAP&&n.setVV(r,e),n.data}getVariation(){return(0,n.A)((0,n.A)({},super.getVariation()),{},{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}g.shared=new g(0);class S extends(p(x(f(y)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.ZG.LINE,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return(0,n.A)((0,n.A)({},super.getVariation()),{},{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}S.shared=new S(0);class b extends(p(x(d(f(y))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.ZG.TEXT,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return(0,n.A)((0,n.A)({},super.getVariation()),{},{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}b.shared=new b(0);class _ extends(f(y)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=a.ZG.LABEL,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.mapAligned=(0,i.nE)(e.placement),t.data}getVariation(){return(0,n.A)((0,n.A)({},super.getVariation()),{},{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}_.shared=new _(0)},76030:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(35143),s=r(25463),i=r(46053),a=(r(18690),r(40565),r(85842));let o=class extends s.a{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,n._)([(0,i.MZ)({readOnly:!0})],o.prototype,"supportsTileUpdates",null),(0,n._)([(0,i.MZ)({constructOnly:!0})],o.prototype,"remoteClient",void 0),(0,n._)([(0,i.MZ)({constructOnly:!0})],o.prototype,"service",void 0),(0,n._)([(0,i.MZ)()],o.prototype,"spatialReference",null),(0,n._)([(0,i.MZ)({constructOnly:!0})],o.prototype,"tileInfo",void 0),(0,n._)([(0,i.MZ)({constructOnly:!0})],o.prototype,"tileStore",void 0),o=(0,n._)([(0,a.$)("esri.views.2d.layers.features.processors.BaseProcessor")],o);const l=o},95753:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var n=r(35143),s=r(91861),i=(r(50076),r(81806),r(76460),r(30726)),a=r(50346),o=(r(40565),r(18690),r(85842)),l=r(15011),c=r(13312),u=r(23758),h=r(61551),v=r(78890),y=r(13097),f=r(15645),d=r(71632),p=r(38103),x=r(76030),m=r(8);class g{constructor(e){this._remoteClient=e,this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}destroy(){}async fetchResource(e,t){const r=this._resourceMap,n=r.get(e);if(n)return n;let s=this._inFlightResourceMap.get(e);if(s)return s;try{s=this._remoteClient.invoke("tileRenderer.fetchResource",{url:e},(0,m.A)({},t)),this._inFlightResourceMap.set(e,s),s.then((t=>(this._inFlightResourceMap.delete(e),r.set(e,t),t)))}catch(i){return(0,a.zf)(i)?null:{width:0,height:0}}return s}getResource(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}}function S(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function b(e){const t=e.message,r={message:{data:{},tileKey:t.tileKey,tileKeyOrigin:t.tileKeyOrigin,version:t.version},transferList:new Array};for(const n in t.data){const e=t.data[n];if(r.message.data[n]=null,(0,i.Ru)(e)){const t=e.stride,s=e.indices.slice(0),a=e.vertices.slice(0),o=e.records.slice(0),l={stride:t,indices:s,vertices:a,records:o,metrics:(0,i.Rh)(e.metrics,(e=>e.slice(0)))};r.transferList.push(s,a,o),r.message.data[n]=l}}return r}let _=class extends x.A{constructor(){super(...arguments),this.type="symbol",this._matchers={feature:null,aggregate:null},this._bufferData=new Map,this._bufferIds=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new g(this.remoteClient)}destroy(){this._resourceManagerProxy.destroy()}get supportsTileUpdates(){return!0}forEachBufferId(e){this._bufferIds.forEach((t=>{t.forEach(e)}))}async update(e,t){const r=t.schema.processors[0];if("symbol"!==r.type)return;const n=(0,l.Ui)(this._schema,r);((0,l.EB)(n,"mesh")||(0,l.EB)(n,"target"))&&(e.mesh=!0,e.why.mesh.push("Symbology changed"),this._schema=r,this._factory=this._createFactory(r),this._factory.update(r,this.tileStore.tileScheme.tileInfo))}onTileMessage(e,t,r,n){return(0,a.Te)(n),this._onTileData(e,t,r,n)}onTileClear(e){return this._bufferData.delete(e.key.id),this._bufferIds.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:{clear:!0}})}onTileError(e,t,r){const n=r.signal,s={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",s,{signal:n})}onTileUpdate(e){for(const t of e.removed)this._bufferData.has(t.key.id)&&this._bufferData.delete(t.key.id),this._bufferIds.has(t.key.id)&&this._bufferIds.delete(t.key.id);for(const t of e.added)this._bufferData.forEach((e=>{for(const r of e)r.message.tileKey===t.id&&this._updateTileMesh("append",t,b(r),[],!1,!1,null)}))}_addBufferData(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e).push(b(t))}_createFactory(e){const{geometryType:t,objectIdField:r,fields:n}=this.service,s={geometryType:t,fields:n,spatialReference:c.A.fromJSON(this.spatialReference)},a=new f._y(((e,t)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",e,t)),this.tileStore.tileScheme.tileInfo),{matcher:o,aggregateMatcher:l}=e.mesh;return this._store=a,this._matchers.feature=(0,d.P7)(o,a,s,this._resourceManagerProxy),this._matchers.aggregate=(0,i.Rh)(l,(e=>(0,d.P7)(e,a,s,this._resourceManagerProxy))),new y.K(t,r,a)}async _onTileData(e,t,r,n){(0,a.Te)(n);const{type:s,addOrUpdate:o,remove:l,clear:c,end:u}=t,h=!!this._schema.mesh.sortKey;if(!o){const t={type:s,addOrUpdate:null,remove:l,clear:c,end:u,sort:h};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},n)}const v=this._processFeatures(e,o,r,n,t.status.version);try{const r=await v;if((0,i.$I)(r)){const t={type:s,addOrUpdate:null,remove:l,clear:c,end:u,sort:h};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},n)}const a=[];for(const t of r){let r=!1;const n=t.message.bufferIds,s=e.key.id,o=t.message.tileKey;if(s!==o&&(0,i.Ru)(n)){if(!this.tileStore.get(o)){this._addBufferData(s,t),a.push(t);continue}let e=this._bufferIds.get(o);e||(e=new Set,this._bufferIds.set(o,e));const i=Array.from(n);for(const t of i){if(e.has(t)){r=!0;break}e.add(t)}}r||(this._addBufferData(s,t),a.push(t))}await Promise.all(a.map((r=>{const i=e.key.id===r.message.tileKey,a=i?t.remove:[],o=i&&t.end;return this._updateTileMesh(s,e,r,a,o,t.clear,n.signal)})))}catch(y){this._handleError(e,y,n)}}async _updateTileMesh(e,t,r,n,s,o,l){const c=e,u=r.message.tileKey,h=!!this._schema.mesh.sortKey;u!==t.key.id&&(s=!1);const v=(0,i.Rh)(r,(e=>e.message)),y=(0,i.Rh)(r,(e=>e.transferList))||[],f={type:c,addOrUpdate:v,remove:n,clear:o,end:s,sort:h},d={transferList:(0,i.oA)(y)||[],signal:l};return(0,a.Te)(d),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:u,data:f},d)}async _processFeatures(e,t,r,n,s){if((0,i.$I)(t)||!t.hasFeatures)return null;const o={transform:e.transform,hasZ:!1,hasM:!1},l=this._factory,c={viewingMode:"",scale:e.scale},u=await this._matchers.feature,h=await this._matchers.aggregate;(0,a.Te)(n);const v=this._getLabelInfos(e,t);return await l.analyze(t.getCursor(),this._resourceManagerProxy,u,h,o,c),(0,a.Te)(n),this._writeFeatureSet(e,t,o,v,l,r,s)}_writeFeatureSet(e,t,r,n,s,a,o){const l=t.getSize(),c=this._schema.mesh.matcher.symbologyType,u=new v.U(e.key.id,{features:l,records:l,metrics:0},c,a,c!==h.w4.HEATMAP,o),y={viewingMode:"",scale:e.scale},f=t.getCursor();for(;f.next();)try{const t=f.getDisplayId(),a=(0,i.Ru)(n)?n.get(t):null;s.writeCursor(u,f,r,y,e.level,a,this._resourceManagerProxy)}catch(p){}const d=e.tileInfoView.tileInfo.isWrappable;return u.serialize(d)}_handleError(e,t,r){if(!(0,a.zf)(t)){const n={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",n,{signal:r.signal})}}_getLabelingSchemaForScale(e){const t=this._schema.mesh.labels;if((0,i.$I)(t))return null;if("subtype"===t.type){const r={type:"subtype",classes:{}};let n=!1;for(const s in t.classes){const i=t.classes[s].filter((t=>S(t,e.scale)));n=n||!!i.length,r.classes[s]=i}return n?r:null}const r=t.classes.filter((t=>S(t,e.scale)));return r.length?{type:"simple",classes:r}:null}_getLabels(e,t){if("subtype"===t.type){var r;const n=this.service.subtypeField,s=(0,i.T7)(n,"Expected to find subtype Field"),a=e.readAttribute(s);return null==a?[]:null!==(r=t.classes[a])&&void 0!==r?r:[]}return t.classes}_getLabelInfos(e,t){const r=this._getLabelingSchemaForScale(e);if((0,i.$I)(r))return null;const n=new Map,a=t.getCursor();for(;a.next();){const e=a.getDisplayId(),t=[],i=(0,u.h8)(e),o=i&&1!==a.readAttribute("cluster_count")?"aggregate":"feature",l=this._getLabels(a,r);for(const r of l){if(r.target!==o)continue;const n=a.getStorage(),l=i&&"feature"===o?n.getComputedStringAtIndex(a.readAttribute("referenceId"),r.fieldIndex):n.getComputedStringAtIndex(e,r.fieldIndex);if(!l)continue;const c=(0,s.y)(l.toString()),u=c[0],h=c[1];this._store.getMosaicItem(r.symbol,(0,p.N)(u)).then((e=>{t[r.index]={glyphs:e.glyphMosaicItems,rtl:h,index:r.index}}))}n.set(e,t)}return n}};_=(0,n._)([(0,o.$)("esri.views.2d.layers.features.processors.SymbolProcessor")],_);const T=_},42141:(e,t,r)=>{r.d(t,{Le:()=>g,ZY:()=>m});var n=r(92746),s=r(61551),i=r(64274);const a={marker:s.ZG.MARKER,fill:s.ZG.FILL,line:s.ZG.LINE,text:s.ZG.TEXT};class o{constructor(e,t,r,n){const o={minScale:null===t||void 0===t?void 0:t.minScale,maxScale:null===t||void 0===t?void 0:t.maxScale},l=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(o);this.layers=e,this.data=t,this.hash=this._createHash()+l,this.rendererKey=r;const c={isOutline:!1,placement:null,symbologyType:s.w4.DEFAULT,vvFlags:r};for(const s of e){const e=a[s.type];c.isOutline="line"===s.type&&s.isOutline,s.materialKey=(0,i.Zl)(e,c),s.maxVVSize=n,s.scaleInfo=o,s.templateHash+=l}}get type(){return"expanded-cim"}_createHash(){let e="";for(const t of this.layers)e+=t.templateHash;return e}}var l=r(93795),c=r(50076),u=r(30726),h=r(50346),v=r(90534),y=r(44568),f=r(79453),d=r(8446);async function p(e,t,r){if(!e.name)throw new c.A("style-symbol-reference-name-missing","Missing name in style symbol reference");if(e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName)return async function(e,t){const n=d.jg.replace(/\{SymbolName\}/gi,e.name);try{const e=await(0,d.yA)(n,t);return(0,d.bo)(e.data)}catch(r){return(0,h.Te)(r),null}}(e,r);try{return async function(e,t,r,n){const s=e.data,i={portal:r&&(0,u.Ru)(r.portal)?r.portal:y.A.getDefault(),url:(0,v.An)(e.baseUrl),origin:"portal-item"},a=s.items.find((e=>e.name===t));if(!a)throw new c.A("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(t,"' could not be found"),{symbolName:t});let o=(0,f.f)((0,d.o5)(a,"cimRef"),i);(0,l.b5)()&&(o=(0,l.EM)(o));try{const e=await(0,d.yA)(o,n);return(0,d.bo)(e.data)}catch(p){return(0,h.Te)(p),null}}(await(0,d.cF)(e,t,r),e.name,t,r)}catch(a){return(0,h.Te)(a),null}}const x=async(e,t,r)=>new o(await(0,n.I)(e.data,t,r),e.data,e.rendererKey,e.maxVVSize),m=async(e,t,r,n)=>{if(!e)return null;if("cim"===e.type)return x(e,t,r);if("web-style"===e.type){const s={type:"cim",data:await p(e,null,n),rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return x(s,t,r)}return e};function g(e){if(!e)return null;const{type:t,cim:r,url:n,materialHash:s}=e,i={cim:r,type:t,mosaicHash:s,url:n,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(t){case"marker":i.size=e.size,i.path=e.path,i.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":i.dashTemplate=e.dashTemplate;break;case"text":i.text=e.text,i.fontName=e.fontName}return i}}}]);
//# sourceMappingURL=4788.41150e12.chunk.js.map