{"version":3,"file":"static/js/765.b88a52f5.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/layers/save/featureLayerUtils.js","../node_modules/@arcgis/core/layers/support/fetchService.js","../node_modules/@arcgis/core/portal/support/jsonContext.js","../node_modules/@arcgis/core/portal/support/portalItemUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{debounce as s,eachAlways as l}from\"../../core/promiseUtils.js\";import{updateOrigins as i}from\"../../core/accessorSupport/originUtils.js\";import n from\"../FeatureLayer.js\";import{parse as u}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as p}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as c,isFeatureServiceLayer as y}from\"../support/layerUtils.js\";import d from\"../../portal/Portal.js\";import m from\"../../portal/PortalItem.js\";import{createForItemWrite as f}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as w,TypeKeyword as h,getWGS84ExtentForItem as v,removeTypeKeyword as b}from\"../../portal/support/portalItemUtils.js\";const I=r.getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,r){if(r.type!==S)throw new t(\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),c(e))throw new t(\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function J(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return P(t,r),a}function N(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function O(e){w(e,h.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function E(e){const r=e.portalItem;if(!r)throw I.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,r)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,r){var a,o;e||(e={}),(a=e).layers||(a.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:u}=await p(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,r),y=A(e.tables,n.tables,r);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=u?[...u.layers,...u.tables]:[];return await U(e,d,s,m),e}function A(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!a.includes(e)))}}async function U(e,t,r,o){const s=t.map((({id:e})=>new n({url:r,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await l(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:r,loaded:o,defaultPopupTemplate:s}=t;if(!o||a(s))return;K(t,{id:r,popupInfo:s.toJSON()},e)}))}function K(e,t,r){e.isTable?F(r.tables,t):F(r.layers,t)}function F(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function R(e){const{portalItem:t}=e;return y(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function _(e,t){var r,a;let o=m.from(t);return o.id&&(o=o.clone(),o.id=null),(r=o).type??(r.type=S),(a=o).portal??(a.portal=d.getDefault()),j(e,o),o}async function q(e,t){const{url:r,layerId:a,title:s,fullExtent:l,isTable:i}=e,n=u(r),p=o(n)&&\"FeatureServer\"===n.serverType;t.url=p?r:`${r}/${a}`,t.title||(t.title=s),t.extent=null,!i&&o(l)&&(t.extent=await v(l)),b(t,h.METADATA),b(t,h.MULTI_LAYER),w(t,h.SINGLE_LAYER),i&&w(t,h.TABLE),O(t)}async function z(e,t,r){const a=e.portal;await(a?._signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const C=s(M);async function M(e,t){await L(e),E(e);const r=e.portalItem,a=f(r),o=await J(e,a,t),s=await T(r,[{layer:e,layerJSON:o}]);return O(r),await r.update({data:s}),i(a),r}const Y=s((async(e,t)=>{await D(e);const r=e[0].portalItem,a=f(r),o=await Promise.all(e.map((e=>J(e,a,t)))),s=await T(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),i(a),r.clone()})),B=s(G);async function G(e,t,r){await L(e);const a=_(e,t),o=f(a),s=N({layer:e,layerJSON:await J(e,o,r)});return await q(e,a),await z(a,s,r),e.portalItem=a,i(o),a}export{C as save,Y as saveAll,B as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";async function r(e,r){let s=await a(e,r);s=s||{},s.layers=s.layers?.filter(t)||[];const n={serviceJSON:s};if((s.currentVersion??0)<10.5)return n;const o=await a(e+\"/layers\",r);return n.layersJSON={layers:o?.layers?.filter(t)||[],tables:o?.tables||[]},n}function t(e){return!e.type||\"Feature Layer\"===e.type}async function a(r,t){return(await e(r,{responseType:\"json\",query:{f:\"json\",...t?.customParameters,token:t?.apiKey}})).data}export{r as fetchFeatureService,a as fetchService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{urlToObject as r}from\"../../core/urlUtils.js\";import t from\"../Portal.js\";function e(e){return{origin:\"portal-item\",url:r(e.itemUrl),portal:e.portal||t.getDefault(),portalItem:e,readResourcePaths:[]}}function o(e){return{origin:\"portal-item\",messages:[],writtenProperties:[],url:e.itemUrl?r(e.itemUrl):null,portal:e.portal||t.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{initializeProjection as e,project as t}from\"../../geometry/projection.js\";import r from\"../../geometry/SpatialReference.js\";import{webMercatorToGeographic as o}from\"../../geometry/support/webMercatorUtils.js\";async function n(n){const i=n.spatialReference;if(i.isWGS84)return n.clone();if(i.isWebMercator)return o(n);const s=r.WGS84;return await e(i,s),t(n,s)}function i(e,t){if(!s(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function s(e,t){return!!e.typeKeywords?.includes(t)}function c(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}async function a(e){const t=e.clone().normalize();let r;if(t.length>1)for(const o of t)r?o.width>r.width&&(r=o):r=o;else r=t[0];return n(r)}const f={DEVELOPER_BASEMAP:\"DeveloperBasemap\",JSAPI:\"ArcGIS API for JavaScript\",METADATA:\"Metadata\",MULTI_LAYER:\"Multilayer\",SINGLE_LAYER:\"Singlelayer\",TABLE:\"Table\"};export{f as TypeKeyword,i as addTypeKeyword,a as getWGS84ExtentForItem,s as hasTypeKeyword,c as removeTypeKeyword};\n"],"names":["i","writtenProperties","forEach","_ref","target","propName","t","newOrigin","e","r","originOf","updateOrigin","I","getLogger","S","g","concat","title","id","declaredClass","j","type","async","L","load","c","J","beforeSave","a","write","_e$messages","messages","filter","map","_ref2","name","message","details","ignoreUnsupported","_ref3","length","errors","P","N","layer","layerJSON","isTable","layers","tables","O","w","h","JSAPI","typeKeywords","indexOf","T","_e$url","test","url","customParameters","apiKey","o","s","fetchData","l","serviceJSON","n","layersJSON","u","p","A","y","itemResources","d","added","m","_ref7","layerId","sourceJSON","find","_ref8","loaded","defaultPopupTemplate","K","popupInfo","toJSON","U","x","$","removed","some","_ref4","_ref5","push","_ref6","includes","F","findIndex","_ref9","R","portalItem","dynamicDataSource","C","error","E","f","update","data","Y","Promise","all","Set","size","D","slice","reload","clone","B","_r$type","_a$portal","from","portal","getDefault","_","fullExtent","serverType","extent","v","b","METADATA","MULTI_LAYER","SINGLE_LAYER","TABLE","q","_a$user","_signIn","user","addItem","item","folder","z","_s$layers","_s$currentVersion","_o$layers","currentVersion","responseType","query","_objectSpread","token","origin","itemUrl","readResourcePaths","_e$typeKeywords","splice","normalize","width","spatialReference","isWGS84","isWebMercator","WGS84","DEVELOPER_BASEMAP"],"sourceRoot":""}